const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["js/index-BvJuXzZe.js","js/index-Dae1U06w.js","js/vue-vendor-BX3z0DRI.js","js/antd-vendor-ChGXved8.js","js/lodash-vendor-C1hxrrCz.js","js/axios-vendor-cIIFlI1p.js","js/index-0Hf0PmIo.js","js/spin-Dif1E5Ka.js","js/_plugin-vue_export-helper-DlAUqK2U.js"])))=>i.map(i=>d[i]);
import{j as _,r as w,o as se,f as le,d as g,$ as W,a7 as Q,c as e,a3 as q,b as K,ab as T,u as s,a4 as C,a5 as S,a6 as m,m as re,ac as ue,h as O,ad as z,ae as X,G as J,af as ce,ag as ie,ah as de,ai as Y,aj as Z,a9 as pe,ak as me,w as D}from"./vue-vendor-BX3z0DRI.js";import{u as L}from"./index-BUvr80Hr.js";import{u as N,U as E,a as fe,b as ge,c as ee,d as ye,_ as ve,r as te,e as _e}from"./index-Dae1U06w.js";import{h as U,F as k,E as he,o as V,L as ke,p as be,q as A,r as Se,B as M,s as xe,u as Ce,v as we,w as Le,x as Qe,M as j,y as ae,G as Ie,S as Be,D as Oe,z as H,H as Re,I as Te,J as Ue,N as $e,O as Me,Q as Ne,V as Ee,W as F}from"./antd-vendor-ChGXved8.js";import{_ as I}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{M as Ae,a as Pe}from"./message-B_TRrMgK.js";import{Q as Ke}from"./spin-Dif1E5Ka.js";import{_ as je}from"./avatar.vue_vue_type_script_setup_true_lang-DltASNom.js";import{Q as De}from"./skeleton-BLzL0NKa.js";import{g as R}from"./generate-menu-item-vU3zl0rQ.js";import{O as P}from"./index-0Hf0PmIo.js";import"./axios-vendor-cIIFlI1p.js";import"./lodash-vendor-C1hxrrCz.js";const x=w([]),$=w([]),B=()=>{const t=_(()=>x.value.length>0),{run:n}=N(E.getUserNotification,{manual:!0,onSuccess:({data:a})=>{x.value=a.unread||[],$.value=a.read||[]}}),{run:r}=N(E.markUserNotificationAsRead,{manual:!0,onSuccess:()=>{U.success("标记已读成功"),n()},onError:a=>{U.error(a.message||"标记已读失败")}}),{run:c}=N(E.deleteUserNotification,{manual:!0,onSuccess:()=>{U.success("删除消息成功"),n()},onError:a=>{U.error(a.message||"删除消息失败")}});return{unread:x,read:$,getUserNotification:n,isHaveUnread:t,markAsRedById:async a=>{await r(a).then(()=>{const l=x.value.find(p=>p.id===a);l&&(x.value=x.value.filter(p=>p.id!==a),$.value=[...$.value,l])})},deleteById:async a=>{await c(a).then(()=>x.value=x.value.filter(l=>l.id!==a))}}},Ve=(t,n={})=>{const{interval:r=3e4,immediate:c=!0,autoStart:i=!0}=n;let o=null;const a=()=>{c&&t(),o=setInterval(t,r)},l=()=>{o&&(clearInterval(o),o=null)};return se(()=>{i&&a()}),le(()=>{l()}),{startPolling:a,stopPolling:l}};function He(t){return typeof t=="function"||Object.prototype.toString.call(t)==="[object Object]"&&!K(t)}const Fe=g({name:"QBreadcrumbs",setup(){const t=W(),{t:n}=Q(),{token:r}=L(),c=_(()=>{const o=new Map;return t.matched.forEach(a=>{var l,p;if((l=a.meta)!=null&&l.title){if((p=a.meta)!=null&&p.parentKey){const h="/".concat(a.meta.parentKey);if(!o.has(h)){const f=n("nav.".concat(a.meta.parentKey));o.set(h,{path:h,title:f})}}o.set(a.path,{path:a.path,title:n(a.meta.title)})}}),Array.from(o.values())}),i=_(()=>({backgroundColor:r.value.colorBgContainer,paddingBlock:"".concat(r.value.paddingXXS,"px"),paddingInline:"".concat(r.value.padding,"px"),borderRadius:"".concat(r.value.borderRadiusLG,"px"),marginBottom:"".concat(r.value.marginXXS,"px"),maxWidth:"max-content"}));return()=>{let o;return e(k,{gap:"small",align:"center",style:i.value},{default:()=>[e(he,null,null),e(V,null,He(o=c.value.map(a=>e(V.Item,{key:a.path},{default:()=>[e(q("router-link"),{to:a.path,class:"q-breadcrumbs-link"},{default:()=>[a.title]})]})))?o:{default:()=>[o]})]})}}}),Ge=g({name:"QLayoutContent",__name:"content",setup(t){T(r=>({"3fb18556":s(n).colorBgElevated}));const{token:n}=L();return(r,c)=>{const i=q("RouterView");return S(),C(s(ke),{class:"layout-content"},{default:m(()=>[e(s(Fe)),e(i,null,{default:m(({Component:o,route:a})=>[e(re,{name:"fade",mode:"out-in"},{default:m(()=>[(S(),C(ue(o),{key:a.path}))]),_:2},1024)]),_:1})]),_:1})}}}),We=I(Ge,[["__scopeId","data-v-d50e910d"]]),ne=g({name:"QNotificationEmpty",setup(){const{t}=Q();return()=>e(be,{description:t("common.notification.empty")},null)}});function G(t){return typeof t=="function"||Object.prototype.toString.call(t)==="[object Object]"&&!K(t)}const oe=g({name:"QNotificationMessage",props:{type:{type:String,required:!0},message:{type:Object,required:!0}},setup(t){const{markAsRedById:n,deleteById:r}=B(),{token:c}=L(),{t:i}=Q(),o=w(!1),a=_(()=>({padding:"".concat(c.value.padding,"px")})),l={markAsRedById:f=>n(f),deleteById:f=>r(f)},p=async(f,y)=>{o.value=!0,await l[y](f),o.value=!1},h=_(()=>i(Ae[t.message.type]));return()=>{let f,y;return e(Ke,{spinning:o.value},{default:()=>[e(k,{vertical:!0,gap:"small",style:a},{default:()=>[e(k,{justify:"space-between",align:"center"},{default:()=>[e(A.Text,null,{default:()=>[t.message.sendUser.username]}),e(Se,{color:Pe[t.message.type]},{default:()=>[h.value]})]}),e(A.Text,null,{default:()=>[t.message.content]}),e(k,{justify:"space-between",align:"center"},{default:()=>[e(A.Text,null,{default:()=>[t.message.create_time]}),e(k,{gap:"small"},{default:()=>[t.type==="unread"&&e(M,{type:"link",size:"small",onClick:()=>p(t.message.id,"markAsRedById")},G(f=i("common.notification.markAsRead"))?f:{default:()=>[f]}),e(M,{type:"link",size:"small",danger:!0,onClick:()=>p(t.message.id,"deleteById")},G(y=i("common.notification.delete"))?y:{default:()=>[y]})]})]})]})]})}}}),qe=g({name:"QNotificationRead",setup(){const{read:t}=B();return()=>e(k,{vertical:!0,gap:"middle"},{default:()=>[t.value.length?t.value.map(n=>e(oe,{type:"read",key:n.id,message:n},null)):e(ne,null,null)]})}}),ze=g({name:"QNotificationUnread",setup(){const{unread:t}=B();return()=>e(k,{vertical:!0,gap:"middle"},{default:()=>[t.value.length?t.value.map(n=>e(oe,{type:"unread",key:n.id,message:n},null)):e(ne,null,null)]})}});function Xe(t){return typeof t=="function"||Object.prototype.toString.call(t)==="[object Object]"&&!K(t)}const Je=g({name:"QNotificationPopoverContent",setup(){const t=w("unread"),{unread:n,read:r}=B(),{t:c}=Q(),i=_(()=>[{label:"".concat(c("common.notification.unread")).concat(n.value.length?"(".concat(n.value.length,")"):""),key:"unread",component:ze},{label:"".concat(c("common.notification.read")).concat(r.value.length?"(".concat(r.value.length,")"):""),key:"read",component:qe}]),o={width:"420px"};return()=>{let a;return e("div",{style:o},[e(xe,{activeKey:t.value,"onUpdate:activeKey":l=>t.value=l},Xe(a=i.value.map(l=>e(Ce,{key:l.key,tab:l.label},{default:()=>[e(l.component,null,null)]})))?a:{default:()=>[a]})])}}}),Ye=g({name:"QNotificationPopover",setup(){const t=_(()=>({maxHeight:"420px",overflowY:"auto"})),{isHaveUnread:n}=B();return()=>e(we,{trigger:"click",placement:"bottomRight",style:t},{content:()=>e(Je,null,null),default:()=>e(Le,{dot:n.value},{default:()=>[e(M,{shape:"circle",icon:e(Qe,null,null)},null)]})})}}),Ze=g({name:"QLocalSelect",setup(){const{localeOptions:t}=fe(),{changeLocale:n}=ge();_(()=>({width:"100px"}));const r=i=>{n(i)},c=_(()=>t.map(o=>({label:o.label,key:o.value})));return()=>e(ae,{trigger:["click","hover"],overlay:e(j,{items:c.value,onClick:i=>r(i.key)},null)},{default:()=>[e(M,{icon:e(Ie,null,null),shape:"circle"},null)]})}}),et=g({name:"QThemeSwitch",setup(){const{isDark:t,toggleTheme:n}=ee();return()=>e(Be,{checked:t.value,onChange:()=>n(),"checked-children":"🌙","un-checked-children":"☀️"},null)}}),tt=g({name:"UserDropdown",__name:"user-dropdown",setup(t){T(y=>({"5feec1b2":s(f).colorText}));const{t:n}=Q(),r=ie(()=>ve(()=>import("./index-BvJuXzZe.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8]))),c=ye(),i={gap:"small",align:"center"},o=[R("/dashboard",n("user.dropdown.menu.dashboard"),O(Oe)),R("update-password",n("user.dropdown.menu.password"),O(H)),R("update-avatar",n("user.dropdown.menu.avatar"),O(H)),R("logout",n("user.dropdown.menu.logout"),O(Re))],a=w(!1),l=w(P.PASSWORD),p=y=>{l.value=y,a.value=!0},h=y=>{switch(y.key){case"logout":c.logout();break;case"update-password":p(P.PASSWORD);break;case"update-avatar":p(P.AVATAR);break;default:te.push(y.key);break}},{token:f}=L();return(y,u)=>{var v;return S(),C(s(De),{loading:!((v=s(c).userInfo)!=null&&v.staffPhoto),avatar:"",paragraph:!1},{default:m(()=>[e(s(k),z(X(i)),{default:m(()=>[e(s(ae),null,{overlay:m(()=>[e(s(j),{items:o,onClick:h})]),default:m(()=>[e(s(Te),{gap:"middle"},{default:m(()=>{var d;return[e(s(Ue),{class:"user-username"},{default:m(()=>{var b;return[J(ce((b=s(c).userInfo)==null?void 0:b.username),1)]}),_:1}),e(s(je),{size:"large",src:(d=s(c).userInfo)==null?void 0:d.staffPhoto},null,8,["src"])]}),_:1})]),_:1}),e(s(r),{type:l.value,"onUpdate:type":u[0]||(u[0]=d=>l.value=d),open:a.value,"onUpdate:open":u[1]||(u[1]=d=>a.value=d)},null,8,["type","open"])]),_:1},16)]),_:1},8,["loading"])}}}),at=I(tt,[["__scopeId","data-v-537ed710"]]),nt={class:"flex-1"},ot=g({name:"QLayoutHeader",__name:"header",props:{collapsed:{default:!1},collapsedModifiers:{}},emits:de(["changeCollapsed"],["update:collapsed"]),setup(t,{emit:n}){T(a=>({d3649c36:s(o).colorBgContainer,"3b75b35e":s(o).colorBorderSecondary,c1c145b8:s(o).colorText}));const r=n,c=Y(t,"collapsed"),i={align:"center",justify:"space-between"},{token:o}=L();return(a,l)=>(S(),C(s($e),{class:"layout-header"},{default:m(()=>[e(s(k),z(X(i)),{default:m(()=>[Z("div",nt,[c.value?(S(),C(s(Me),{key:0,class:"trigger layout-header-collapsed-icon",onClick:l[0]||(l[0]=p=>r("changeCollapsed"))})):(S(),C(s(Ne),{key:1,class:"trigger layout-header-collapsed-icon",onClick:l[1]||(l[1]=p=>r("changeCollapsed"))}))]),e(s(k),{gap:"large",align:"center"},{default:m(()=>[e(s(et)),e(s(Ye)),e(s(Ze)),e(at)]),_:1}),l[2]||(l[2]=J(", "))]),_:1},16)]),_:1}))}}),st=I(ot,[["__scopeId","data-v-3bf19e72"]]),lt="/saas-hrm/images/logo-CWnL_6xh.png",rt={class:"logo-container"},ut=g({name:"QLogo",__name:"logo",setup(t){return(n,r)=>(S(),pe("div",rt,[e(s(me),{to:"/"},{default:m(()=>r[0]||(r[0]=[Z("img",{class:"logo",src:lt,alt:"logo"},null,-1)])),_:1})]))}}),ct=I(ut,[["__scopeId","data-v-09d7471b"]]),it=g({name:"QLayoutSider",__name:"sider",props:{collapsed:{type:Boolean,default:!1},collapsedModifiers:{}},emits:["update:collapsed"],setup(t){T(u=>({c4679002:s(f).colorBgContainer}));const{t:n}=Q(),{getRoutes:r}=_e(),c=W(),i=Y(t,"collapsed"),o=_(()=>{var u;return(u=c.meta)!=null&&u.parentKey?["/".concat(c.meta.parentKey)]:[c.path]}),a=w([]);D(()=>c.path,u=>{const d=c.matched.slice(0,-1).map(b=>b.path).filter(b=>b!=="/");i.value||(a.value=d)},{immediate:!0}),D(i,u=>{u&&(a.value=[])});const l=({key:u})=>{te.push(u)},p=u=>{a.value=u},{themeStatus:h}=ee(),{token:f}=L(),y=_(()=>r().filter(u=>u.meta).filter(u=>u.meta.title&&!u.meta.hidden).sort((u,v)=>{var d,b;return((d=u.meta.index)!=null?d:0)-((b=v.meta.index)!=null?b:0)}).map(u=>R(u.path,n(u.meta.title),typeof u.meta.icon=="string"?O(u.meta.icon):u.meta.icon)));return(u,v)=>(S(),C(s(Ee),{width:"150",class:"layout-sider",collapsed:i.value,"onUpdate:collapsed":v[2]||(v[2]=d=>i.value=d),trigger:null,collapsible:"",theme:s(h)},{default:m(()=>[e(ct),e(s(j),{theme:s(h),mode:"inline",selectedKeys:o.value,"onUpdate:selectedKeys":v[0]||(v[0]=d=>o.value=d),openKeys:a.value,"onUpdate:openKeys":v[1]||(v[1]=d=>a.value=d),items:y.value,onClick:l,onOpenChange:p,class:"layout-sider-menu"},null,8,["theme","selectedKeys","openKeys","items"])]),_:1},8,["collapsed","theme"]))}}),dt=I(it,[["__scopeId","data-v-104a62d7"]]),pt=g({name:"LayoutDefault",__name:"default",setup(t){T(o=>({"3060e816":s(c).colorBgContainer}));const n=w(!0),r=o=>{o!==void 0?n.value=o:n.value=!n.value},{token:c}=L(),{getUserNotification:i}=B();return Ve(async()=>{await i()},{interval:3e3,immediate:!0,autoStart:!0}),(o,a)=>(S(),C(s(F),{class:"layout-default"},{default:m(()=>[e(dt,{collapsed:n.value},null,8,["collapsed"]),e(s(F),{class:"layout-main"},{default:m(()=>[e(st,{collapsed:n.value,onChangeCollapsed:r},null,8,["collapsed"]),e(We,{class:"layout-content"})]),_:1})]),_:1}))}}),Lt=I(pt,[["__scopeId","data-v-5b298699"]]);export{Lt as default};
