System.register(["./vue-vendor-legacy-ikyms0Ip.js","./index-legacy-DWXZgdOb.js","./department.service-legacy-BkF3W9O-.js","./employee.service-legacy-D3Ei94HF.js","./spin-legacy-CX9iz6gd.js","./index-legacy-D_zaI8lQ.js","./department-legacy-ZXh46dVA.js","./antd-vendor-legacy-DsFsidym.js","./_plugin-vue_export-helper-legacy-DgAO6S8O.js","./axios-vendor-legacy-B4nRALG8.js","./lodash-vendor-legacy-k_izlGWN.js"],(function(e,a){"use strict";var l,r,o,t,m,s,d,i,n,u,p,f,c,y,g,v,b,h,E,_,O,j,k,w,q,D,x,I,U,S,T,Y,F,C,N,P,L,M,B,R;return{setters:[e=>{l=e.d,r=e.ab,o=e.a7,t=e.a,m=e.r,s=e.$,d=e.j,i=e.o,n=e.a4,u=e.a5,p=e.a6,f=e.c,c=e.u,y=e.a9,g=e.aj,v=e.af,b=e.G},e=>{h=e.u,E=e.r},e=>{_=e.D},e=>{O=e.F,j=e.E},e=>{k=e.Q},e=>{w=e.u},e=>{q=e.D},e=>{D=e.h,x=e.F,I=e.ag,U=e.ah,S=e.ai,T=e.aj,Y=e.ak,F=e.al,C=e.am,N=e.an,P=e.ao,L=e.ap,M=e.aq,B=e.B},e=>{R=e._},null,null],execute:function(){const a=["src"],$={key:1},z={class:"ant-upload-text"};e("default",R(l({name:"EmployeeDetailPage",__name:"index",setup(e){r((e=>({"3a285901":`${c(R).paddingLG}px`,"07b52918":c(R).colorBgContainer})));const{t:l}=o(),{token:R}=w(),G={id:1,workNumber:"",mobile:"",departmentId:1,correctionTime:"",formOfEmployment:O.Formal,staffPhoto:"",timeOfEntry:"",username:""},A=t(G),Q=m([]),H=s(),J=m([]),K={span:8},V={span:16},W={username:[{required:!0,message:l("employee.detail.form.rules.username.required"),trigger:"blur"},{min:2,max:4,message:l("employee.detail.form.rules.username.length"),trigger:"blur"}],mobile:[{required:!0,message:l("employee.detail.form.rules.mobile.required"),trigger:"blur"},{pattern:/^1[3-9]\d{9}$/,message:l("employee.detail.form.rules.mobile.format"),trigger:"blur"}],timeOfEntry:[{required:!0,message:l("employee.detail.form.rules.timeOfEntry.required"),trigger:"change"},{type:"date",message:l("employee.detail.form.rules.timeOfEntry.format"),trigger:"change"}],correctionTime:[{required:!0,message:l("employee.detail.form.rules.correctionTime.required"),trigger:"change"},{type:"date",message:l("employee.detail.form.rules.correctionTime.format"),trigger:"change"}],departmentId:[{required:!0,message:l("employee.detail.form.rules.department.required"),trigger:"change"}],formOfEmployment:[{required:!0,message:l("employee.detail.form.rules.formOfEmployment.required"),trigger:"change"}]},X=m(null),Z=m([]),ee=m(!1),ae=m(""),le=e=>{"uploading"!==e.file.status?("done"===e.file.status&&function(e,a){const l=new FileReader;l.addEventListener("load",(()=>a(l.result))),l.readAsDataURL(e)}(e.file.originFileObj,(e=>{ae.value=e,ee.value=!1})),"error"===e.file.status&&(ee.value=!1,D.error("upload error"))):ee.value=!0},re=e=>{const a="image/jpeg"===e.type||"image/png"===e.type;a||D.error(l("employee.detail.upload.error.type"));const r=e.size/1024/1024<2;return r||D.error(l("employee.detail.upload.error.size")),a&&r},{run:oe,loading:te}=h(j.getEmployeeDetailById,{manual:!0,onSuccess:({data:e})=>{console.log(e),Object.assign(A,e),Q.value=[e.departmentId.toString()]}}),{loading:me}=h(_.getCompanyDepartmentList,{onSuccess:({data:e})=>{console.log(e),J.value=q.toCascader(e)}}),se=d((()=>te.value||me.value)),{run:de,loading:ie}=h(j.updateEmployeeDetail,{manual:!0,onSuccess:()=>{D.success(l("employee.messages.updateSuccess"))},onError:e=>{D.error(e.message||l("employee.messages.updateError"))}}),{run:ne,loading:ue}=h(j.addEmployee,{manual:!0,onSuccess:()=>{D.success(l("employee.messages.addSuccess")),E.push("/employee")},onError:e=>{D.error(e.message||l("employee.messages.addError"))}}),pe=d((()=>ie.value||ue.value)),fe=[{label:l("employee.table.formalOfEmployment.formal"),value:O.Formal},{label:l("employee.table.formalOfEmployment.informal"),value:O.InFormal}],ce=()=>{const e=Number(Q.value.slice(-1)[0]);A.departmentId=e,X.value?.validate().then((a=>{if(H.params.id)de(H.params.id,{...A,departmentId:e});else{const{id:a,...l}=A;ne({...l,departmentId:e})}}))};return i((async()=>{H.params.id&&await oe(H.params.id)})),(e,r)=>(u(),n(c(k),{spinning:se.value},{default:p((()=>[f(c(x),{class:"detail-wrapper h-full",justify:"star"},{default:p((()=>[f(c(I),{ref_key:"formRef",ref:X,rules:W,class:"detail-form",model:A,"label-col":K,"wrapper-col":V},{default:p((()=>[f(c(U),{label:c(l)("employee.detail.form.fields.username"),name:"username"},{default:p((()=>[f(c(S),{value:A.username,"onUpdate:value":r[0]||(r[0]=e=>A.username=e),placeholder:c(l)("employee.detail.form.placeholder.username")},null,8,["value","placeholder"])])),_:1},8,["label"]),f(c(U),{label:c(l)("employee.detail.form.fields.workNumber"),name:"workNumber"},{default:p((()=>[f(c(S),{value:A.workNumber,"onUpdate:value":r[1]||(r[1]=e=>A.workNumber=e),disabled:""},null,8,["value"])])),_:1},8,["label"]),f(c(U),{label:c(l)("employee.detail.form.fields.mobile"),name:"mobile"},{default:p((()=>[f(c(S),{value:A.mobile,"onUpdate:value":r[2]||(r[2]=e=>A.mobile=e),disabled:!!c(H).params.id},null,8,["value","disabled"])])),_:1},8,["label"]),f(c(U),{label:c(l)("employee.detail.form.fields.department"),name:"departmentId"},{default:p((()=>[f(c(T),{"display-render":({labels:e})=>e.join("-"),placeholder:c(l)("employee.detail.form.placeholder.department"),options:J.value,value:Q.value,"onUpdate:value":r[3]||(r[3]=e=>Q.value=e)},null,8,["display-render","placeholder","options","value"])])),_:1},8,["label"]),f(c(U),{label:c(l)("employee.detail.form.fields.formOfEmployment"),name:"formOfEmployment"},{default:p((()=>[f(c(Y),{placeholder:c(l)("employee.detail.form.placeholder.formOfEmployment"),value:A.formOfEmployment,"onUpdate:value":r[4]||(r[4]=e=>A.formOfEmployment=e),options:fe},null,8,["placeholder","value"])])),_:1},8,["label"]),f(c(U),{label:c(l)("employee.detail.form.fields.timeOfEntry"),name:"timeOfEntry"},{default:p((()=>[f(c(F),{"value-format":"YYYY-MM-DD",value:A.timeOfEntry,"onUpdate:value":r[5]||(r[5]=e=>A.timeOfEntry=e)},null,8,["value"])])),_:1},8,["label"]),f(c(U),{label:c(l)("employee.detail.form.fields.correctionTime"),name:"correctionTime"},{default:p((()=>[f(c(F),{"value-format":"YYYY-MM-DD",value:A.correctionTime,"onUpdate:value":r[6]||(r[6]=e=>A.correctionTime=e)},null,8,["value"])])),_:1},8,["label"]),f(c(U),{label:c(l)("employee.detail.form.fields.staffPhoto"),name:"staffPhoto"},{default:p((()=>[f(c(C),{"file-list":Z.value,"onUpdate:fileList":r[7]||(r[7]=e=>Z.value=e),name:"avatar","list-type":"picture-card",class:"avatar-uploader","show-upload-list":!1,action:"https://www.mocky.io/v2/5cc8019d300000980a055e76","before-upload":re,onChange:le},{default:p((()=>[A.staffPhoto?(u(),y("img",{key:0,class:"w-full h-full",src:A.staffPhoto,alt:"avatar"},null,8,a)):(u(),y("div",$,[ee.value?(u(),n(c(N),{key:0})):(u(),n(c(P),{key:1})),g("div",z,v(c(l)("employee.detail.upload.text")),1)]))])),_:1},8,["file-list"])])),_:1},8,["label"]),f(c(U),null,{default:p((()=>[f(c(L),null,{default:p((()=>[f(c(M),{span:12}),f(c(M),null,{default:p((()=>[f(c(B),{type:"primary",onClick:ce,loading:pe.value},{default:p((()=>[b(v(c(H).params.id?c(l)("employee.detail.form.buttons.update"):c(l)("employee.detail.form.buttons.save")),1)])),_:1},8,["loading"])])),_:1})])),_:1})])),_:1})])),_:1},8,["model"])])),_:1})])),_:1},8,["spinning"]))}}),[["__scopeId","data-v-c0f21f24"]]))}}}));
