const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["js/index-Dw0g-wYg.js","js/index-CI1igBQZ.js","js/vue-vendor-I_PSXyJa.js","js/antd-vendor-T3zku5__.js","js/lodash-vendor-DOy_biNW.js","js/axios-vendor-cIIFlI1p.js","js/index-0Hf0PmIo.js","js/spin-f7H7F6Je.js","js/_plugin-vue_export-helper-DlAUqK2U.js"])))=>i.map(i=>d[i]);
import{j as _,r as w,o as se,f as le,d as g,Z as W,a5 as Q,c as e,a1 as X,b as K,a9 as T,u as s,a2 as C,a3 as S,a4 as m,m as re,aa as ue,h as O,ab as q,ac as z,G as Y,ad as ce,ae as ie,af as de,ag as J,ah as Z,a7 as pe,ai as me,w as j}from"./vue-vendor-I_PSXyJa.js";import{u as L}from"./index-YJ2Yz_0y.js";import{u as $,U as E,a as fe,b as ge,c as ee,d as ye,_ as ve,r as te,e as _e}from"./index-CI1igBQZ.js";import{h as U,F as k,E as he,p as V,L as ke,q as be,s as A,u as Se,B as N,v as xe,w as Ce,x as we,y as Le,z as Qe,M as D,G as ae,H as Ie,S as Be,D as Oe,I as H,J as Re,N as Te,O as Ue,Q as Me,V as Ne,W as $e,X as Ee,Y as F}from"./antd-vendor-T3zku5__.js";import{_ as I}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{M as Ae,a as Pe}from"./message-B_TRrMgK.js";import{Q as Ke}from"./spin-f7H7F6Je.js";import{_ as De}from"./avatar.vue_vue_type_script_setup_true_lang-DO-hdSc-.js";import{Q as je}from"./skeleton-DY1tZivi.js";import{g as R}from"./generate-menu-item-vU3zl0rQ.js";import{O as P}from"./index-0Hf0PmIo.js";import"./axios-vendor-cIIFlI1p.js";import"./lodash-vendor-DOy_biNW.js";const x=w([]),M=w([]),B=()=>{const t=_(()=>x.value.length>0),{run:n}=$(E.getUserNotification,{manual:!0,onSuccess:({data:a})=>{x.value=a.unread||[],M.value=a.read||[]}}),{run:r}=$(E.markUserNotificationAsRead,{manual:!0,onSuccess:()=>{U.success("æ ‡è®°å·²è¯»æˆåŠŸ"),n()},onError:a=>{U.error(a.message||"æ ‡è®°å·²è¯»å¤±è´¥")}}),{run:c}=$(E.deleteUserNotification,{manual:!0,onSuccess:()=>{U.success("åˆ é™¤æ¶ˆæ¯æˆåŠŸ"),n()},onError:a=>{U.error(a.message||"åˆ é™¤æ¶ˆæ¯å¤±è´¥")}});return{unread:x,read:M,getUserNotification:n,isHaveUnread:t,markAsRedById:async a=>{await r(a).then(()=>{const l=x.value.find(p=>p.id===a);l&&(x.value=x.value.filter(p=>p.id!==a),M.value=[...M.value,l])})},deleteById:async a=>{await c(a).then(()=>x.value=x.value.filter(l=>l.id!==a))}}},Ve=(t,n={})=>{const{interval:r=3e4,immediate:c=!0,autoStart:i=!0}=n;let o=null;const a=()=>{c&&t(),o=setInterval(t,r)},l=()=>{o&&(clearInterval(o),o=null)};return se(()=>{i&&a()}),le(()=>{l()}),{startPolling:a,stopPolling:l}};function He(t){return typeof t=="function"||Object.prototype.toString.call(t)==="[object Object]"&&!K(t)}const Fe=g({name:"QBreadcrumbs",setup(){const t=W(),{t:n}=Q(),{token:r}=L(),c=_(()=>{const o=new Map;return t.matched.forEach(a=>{var l,p;if((l=a.meta)!=null&&l.title){if((p=a.meta)!=null&&p.parentKey){const h="/".concat(a.meta.parentKey);if(!o.has(h)){const f=n("nav.".concat(a.meta.parentKey));o.set(h,{path:h,title:f})}}o.set(a.path,{path:a.path,title:n(a.meta.title)})}}),Array.from(o.values())}),i=_(()=>({backgroundColor:r.value.colorBgContainer,paddingBlock:"".concat(r.value.paddingXXS,"px"),paddingInline:"".concat(r.value.padding,"px"),borderRadius:"".concat(r.value.borderRadiusLG,"px"),marginBottom:"".concat(r.value.marginXXS,"px"),maxWidth:"max-content"}));return()=>{let o;return e(k,{gap:"small",align:"center",style:i.value},{default:()=>[e(he,null,null),e(V,null,He(o=c.value.map(a=>e(V.Item,{key:a.path},{default:()=>[e(X("router-link"),{to:a.path,class:"q-breadcrumbs-link"},{default:()=>[a.title]})]})))?o:{default:()=>[o]})]})}}}),Ge=g({name:"QLayoutContent",__name:"content",setup(t){T(r=>({"3fb18556":s(n).colorBgElevated}));const{token:n}=L();return(r,c)=>{const i=X("RouterView");return S(),C(s(ke),{class:"layout-content"},{default:m(()=>[e(s(Fe)),e(i,null,{default:m(({Component:o,route:a})=>[e(re,{name:"fade",mode:"out-in"},{default:m(()=>[(S(),C(ue(o),{key:a.path}))]),_:2},1024)]),_:1})]),_:1})}}}),We=I(Ge,[["__scopeId","data-v-d50e910d"]]),ne=g({name:"QNotificationEmpty",setup(){const{t}=Q();return()=>e(be,{description:t("common.notification.empty")},null)}});function G(t){return typeof t=="function"||Object.prototype.toString.call(t)==="[object Object]"&&!K(t)}const oe=g({name:"QNotificationMessage",props:{type:{type:String,required:!0},message:{type:Object,required:!0}},setup(t){const{markAsRedById:n,deleteById:r}=B(),{token:c}=L(),{t:i}=Q(),o=w(!1),a=_(()=>({padding:"".concat(c.value.padding,"px")})),l={markAsRedById:f=>n(f),deleteById:f=>r(f)},p=async(f,y)=>{o.value=!0,await l[y](f),o.value=!1},h=_(()=>i(Ae[t.message.type]));return()=>{let f,y;return e(Ke,{spinning:o.value},{default:()=>[e(k,{vertical:!0,gap:"small",style:a},{default:()=>[e(k,{justify:"space-between",align:"center"},{default:()=>[e(A.Text,null,{default:()=>[t.message.sendUser.username]}),e(Se,{color:Pe[t.message.type]},{default:()=>[h.value]})]}),e(A.Text,null,{default:()=>[t.message.content]}),e(k,{justify:"space-between",align:"center"},{default:()=>[e(A.Text,null,{default:()=>[t.message.create_time]}),e(k,{gap:"small"},{default:()=>[t.type==="unread"&&e(N,{type:"link",size:"small",onClick:()=>p(t.message.id,"markAsRedById")},G(f=i("common.notification.markAsRead"))?f:{default:()=>[f]}),e(N,{type:"link",size:"small",danger:!0,onClick:()=>p(t.message.id,"deleteById")},G(y=i("common.notification.delete"))?y:{default:()=>[y]})]})]})]})]})}}}),Xe=g({name:"QNotificationRead",setup(){const{read:t}=B();return()=>e(k,{vertical:!0,gap:"middle"},{default:()=>[t.value.length?t.value.map(n=>e(oe,{type:"read",key:n.id,message:n},null)):e(ne,null,null)]})}}),qe=g({name:"QNotificationUnread",setup(){const{unread:t}=B();return()=>e(k,{vertical:!0,gap:"middle"},{default:()=>[t.value.length?t.value.map(n=>e(oe,{type:"unread",key:n.id,message:n},null)):e(ne,null,null)]})}});function ze(t){return typeof t=="function"||Object.prototype.toString.call(t)==="[object Object]"&&!K(t)}const Ye=g({name:"QNotificationPopoverContent",setup(){const t=w("unread"),{unread:n,read:r}=B(),{t:c}=Q(),i=_(()=>[{label:"".concat(c("common.notification.unread")).concat(n.value.length?"(".concat(n.value.length,")"):""),key:"unread",component:qe},{label:"".concat(c("common.notification.read")).concat(r.value.length?"(".concat(r.value.length,")"):""),key:"read",component:Xe}]),o={width:"420px"};return()=>{let a;return e("div",{style:o},[e(xe,{activeKey:t.value,"onUpdate:activeKey":l=>t.value=l},ze(a=i.value.map(l=>e(Ce,{key:l.key,tab:l.label},{default:()=>[e(l.component,null,null)]})))?a:{default:()=>[a]})])}}}),Je=g({name:"QNotificationPopover",setup(){const t=_(()=>({maxHeight:"420px",overflowY:"auto"})),{isHaveUnread:n}=B();return()=>e(we,{trigger:"click",placement:"bottomRight",style:t},{content:()=>e(Ye,null,null),default:()=>e(Le,{dot:n.value},{default:()=>[e(N,{shape:"circle",icon:e(Qe,null,null)},null)]})})}}),Ze=g({name:"QLocalSelect",setup(){const{localeOptions:t}=fe(),{changeLocale:n}=ge();_(()=>({width:"100px"}));const r=i=>{n(i)},c=_(()=>t.map(o=>({label:o.label,key:o.value})));return()=>e(ae,{trigger:["click","hover"],overlay:e(D,{items:c.value,onClick:i=>r(i.key)},null)},{default:()=>[e(N,{icon:e(Ie,null,null),shape:"circle"},null)]})}}),et=g({name:"QThemeSwitch",setup(){const{isDark:t,toggleTheme:n}=ee();return()=>e(Be,{checked:t.value,onChange:()=>n(),"checked-children":"ðŸŒ™","un-checked-children":"â˜€ï¸"},null)}}),tt=g({name:"UserDropdown",__name:"user-dropdown",setup(t){T(y=>({"5feec1b2":s(f).colorText}));const{t:n}=Q(),r=ie(()=>ve(()=>import("./index-Dw0g-wYg.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8]))),c=ye(),i={gap:"small",align:"center"},o=[R("/dashboard",n("user.dropdown.menu.dashboard"),O(Oe)),R("update-password",n("user.dropdown.menu.password"),O(H)),R("update-avatar",n("user.dropdown.menu.avatar"),O(H)),R("logout",n("user.dropdown.menu.logout"),O(Re))],a=w(!1),l=w(P.PASSWORD),p=y=>{l.value=y,a.value=!0},h=y=>{switch(y.key){case"logout":c.logout();break;case"update-password":p(P.PASSWORD);break;case"update-avatar":p(P.AVATAR);break;default:te.push(y.key);break}},{token:f}=L();return(y,u)=>{var v;return S(),C(s(je),{loading:!((v=s(c).userInfo)!=null&&v.staffPhoto),avatar:"",paragraph:!1},{default:m(()=>[e(s(k),q(z(i)),{default:m(()=>[e(s(ae),null,{overlay:m(()=>[e(s(D),{items:o,onClick:h})]),default:m(()=>[e(s(Te),{gap:"middle"},{default:m(()=>{var d;return[e(s(Ue),{class:"user-username"},{default:m(()=>{var b;return[Y(ce((b=s(c).userInfo)==null?void 0:b.username),1)]}),_:1}),e(s(De),{size:"large",src:(d=s(c).userInfo)==null?void 0:d.staffPhoto},null,8,["src"])]}),_:1})]),_:1}),e(s(r),{type:l.value,"onUpdate:type":u[0]||(u[0]=d=>l.value=d),open:a.value,"onUpdate:open":u[1]||(u[1]=d=>a.value=d)},null,8,["type","open"])]),_:1},16)]),_:1},8,["loading"])}}}),at=I(tt,[["__scopeId","data-v-537ed710"]]),nt={class:"flex-1"},ot=g({name:"QLayoutHeader",__name:"header",props:{collapsed:{default:!1},collapsedModifiers:{}},emits:de(["changeCollapsed"],["update:collapsed"]),setup(t,{emit:n}){T(a=>({d3649c36:s(o).colorBgContainer,"3b75b35e":s(o).colorBorderSecondary,c1c145b8:s(o).colorText}));const r=n,c=J(t,"collapsed"),i={align:"center",justify:"space-between"},{token:o}=L();return(a,l)=>(S(),C(s(Me),{class:"layout-header"},{default:m(()=>[e(s(k),q(z(i)),{default:m(()=>[Z("div",nt,[c.value?(S(),C(s(Ne),{key:0,class:"trigger layout-header-collapsed-icon",onClick:l[0]||(l[0]=p=>r("changeCollapsed"))})):(S(),C(s($e),{key:1,class:"trigger layout-header-collapsed-icon",onClick:l[1]||(l[1]=p=>r("changeCollapsed"))}))]),e(s(k),{gap:"large",align:"center"},{default:m(()=>[e(s(et)),e(s(Je)),e(s(Ze)),e(at)]),_:1}),l[2]||(l[2]=Y(", "))]),_:1},16)]),_:1}))}}),st=I(ot,[["__scopeId","data-v-3bf19e72"]]),lt="/sass-hrm/images/logo-CWnL_6xh.png",rt={class:"logo-container"},ut=g({name:"QLogo",__name:"logo",setup(t){return(n,r)=>(S(),pe("div",rt,[e(s(me),{to:"/"},{default:m(()=>r[0]||(r[0]=[Z("img",{class:"logo",src:lt,alt:"logo"},null,-1)])),_:1})]))}}),ct=I(ut,[["__scopeId","data-v-09d7471b"]]),it=g({name:"QLayoutSider",__name:"sider",props:{collapsed:{type:Boolean,default:!1},collapsedModifiers:{}},emits:["update:collapsed"],setup(t){T(u=>({c4679002:s(f).colorBgContainer}));const{t:n}=Q(),{getRoutes:r}=_e(),c=W(),i=J(t,"collapsed"),o=_(()=>{var u;return(u=c.meta)!=null&&u.parentKey?["/".concat(c.meta.parentKey)]:[c.path]}),a=w([]);j(()=>c.path,u=>{const d=c.matched.slice(0,-1).map(b=>b.path).filter(b=>b!=="/");i.value||(a.value=d)},{immediate:!0}),j(i,u=>{u&&(a.value=[])});const l=({key:u})=>{te.push(u)},p=u=>{a.value=u},{themeStatus:h}=ee(),{token:f}=L(),y=_(()=>r().filter(u=>u.meta).filter(u=>u.meta.title&&!u.meta.hidden).sort((u,v)=>{var d,b;return((d=u.meta.index)!=null?d:0)-((b=v.meta.index)!=null?b:0)}).map(u=>R(u.path,n(u.meta.title),typeof u.meta.icon=="string"?O(u.meta.icon):u.meta.icon)));return(u,v)=>(S(),C(s(Ee),{width:"150",class:"layout-sider",collapsed:i.value,"onUpdate:collapsed":v[2]||(v[2]=d=>i.value=d),trigger:null,collapsible:"",theme:s(h)},{default:m(()=>[e(ct),e(s(D),{theme:s(h),mode:"inline",selectedKeys:o.value,"onUpdate:selectedKeys":v[0]||(v[0]=d=>o.value=d),openKeys:a.value,"onUpdate:openKeys":v[1]||(v[1]=d=>a.value=d),items:y.value,onClick:l,onOpenChange:p,class:"layout-sider-menu"},null,8,["theme","selectedKeys","openKeys","items"])]),_:1},8,["collapsed","theme"]))}}),dt=I(it,[["__scopeId","data-v-104a62d7"]]),pt=g({name:"LayoutDefault",__name:"default",setup(t){T(o=>({"3060e816":s(c).colorBgContainer}));const n=w(!0),r=o=>{o!==void 0?n.value=o:n.value=!n.value},{token:c}=L(),{getUserNotification:i}=B();return Ve(async()=>{await i()},{interval:3e3,immediate:!0,autoStart:!0}),(o,a)=>(S(),C(s(F),{class:"layout-default"},{default:m(()=>[e(dt,{collapsed:n.value},null,8,["collapsed"]),e(s(F),{class:"layout-main"},{default:m(()=>[e(st,{collapsed:n.value,onChangeCollapsed:r},null,8,["collapsed"]),e(We,{class:"layout-content"})]),_:1})]),_:1}))}}),Lt=I(pt,[["__scopeId","data-v-5b298699"]]);export{Lt as default};
