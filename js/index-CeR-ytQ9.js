const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["js/modal-w8Z3ZG89.js","js/modal.vue_vue_type_script_setup_true_lang-BwdYvTp8.js","js/index-YJ2Yz_0y.js","js/antd-vendor-T3zku5__.js","js/vue-vendor-I_PSXyJa.js","js/lodash-vendor-DOy_biNW.js","js/spin-f7H7F6Je.js","js/index-CI1igBQZ.js","js/axios-vendor-cIIFlI1p.js","js/department.service-BmOWA-Yr.js","js/_plugin-vue_export-helper-DlAUqK2U.js"])))=>i.map(i=>d[i]);
import{u as v,c as G,_ as I}from"./index-CI1igBQZ.js";import{d as R,a5 as V,s as $,r as d,o as F,a2 as j,a3 as N,a4 as n,u as e,a9 as Q,c as a,G as c,ad as m,h as X,ae as q}from"./vue-vendor-I_PSXyJa.js";import{Q as H}from"./skeleton-DY1tZivi.js";import{u as U}from"./index-YJ2Yz_0y.js";import{D as b}from"./department.service-BmOWA-Yr.js";import{D as z}from"./department-Ccp6HD3_.js";import{h,F as u,ac as J,O as f,G as K,M as W,ad as Y,ae as Z}from"./antd-vendor-T3zku5__.js";import{_ as ee}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./axios-vendor-cIIFlI1p.js";import"./lodash-vendor-DOy_biNW.js";const te=R({name:"DepartmentPage",__name:"index",setup(ae){Q(t=>({"35082fb2":"".concat(e(r).paddingLG*2,"px"),"004fa809":e(r).colorBgContainer,"342b3036":"".concat(e(r).borderRadiusLG,"px"),"1f512b16":e(r).colorBorderSecondary,"218339ae":"".concat(e(r).paddingXXS,"px"),"24a2dbb3":e(C)&&"transparent","00e3db7c":e(C)?e(r).colorPrimary:e(r).colorPrimaryHover}));const k=q(()=>I(()=>import("./modal-w8Z3ZG89.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10]))),{t:o}=V(),{token:r}=U(),_=$([]),g=d(),x=[{key:"addChild",label:o("department.operations.addChild")},{key:"edit",label:o("department.operations.edit")},{key:"delete",label:o("department.operations.delete")}],l=d(!1),y=d("addChild"),D=(t,s)=>{l.value=!0,y.value=t,g.value=s},{loading:S,run:p}=v(b.getCompanyDepartmentList,{onSuccess:t=>{_.value=z.toTree(t.data)}}),M=t=>{D("addChild",t.toString())},T=t=>{D("edit",t.toString())},w=d(!1),{run:L}=v(b.deleteDepartment,{manual:!0,onSuccess:()=>{h.success(o("department.operations.operationMessage.deleteSuccess")),p()},onError:t=>{h.error(t.message||o("department.operations.operationMessage.deleteError"))},onFinally:()=>{w.value=!1}}),O={addChild:M,edit:T,delete:t=>{Z.error({title:o("department.operations.operationMessage.deleteConfirmTitle"),content:o("department.operations.operationMessage.deleteConfirmContent"),okText:o("department.operations.operationMessage.confirmDelete"),closable:!0,cancelText:o("department.operations.operationMessage.cancelDelete"),onOk:async()=>(await L(t.toString()),null)})}},A=(t,s)=>{O[t.key](s)},{isDark:C}=G();return F(async()=>{await p()}),(t,s)=>(N(),j(e(u),{class:"department-wrapper",justify:"center",align:"start"},{default:n(()=>[a(e(H),{loading:e(S),active:"",title:!1,paragraph:{rows:16}},{default:n(()=>[a(e(J),{class:"department-tree flex-1","default-expand-all":"",draggable:"","block-node":"","tree-data":_.value},{title:n(({title:i,managerName:E,key:P})=>[a(e(u),{class:"department-tree-item",justify:"space-between"},{default:n(()=>[a(e(f),null,{default:n(()=>[c(m(i),1)]),_:2},1024),a(e(u),{gap:"middle"},{default:n(()=>[a(e(f),{type:"secondary"},{default:n(()=>[c(m(E),1)]),_:2},1024),a(e(K),{overlay:X(e(W),{items:x,onClick:B=>A(B,P)}),arrow:{pointAtCenter:!0}},{default:n(()=>[a(e(f),{type:"secondary"},{default:n(()=>[c(m(t.$t("department.operations.title"))+" ",1),a(e(Y))]),_:1})]),_:2},1032,["overlay"])]),_:2},1024)]),_:2},1024)]),_:1},8,["tree-data"])]),_:1},8,["loading"]),a(e(k),{open:l.value,"onUpdate:open":s[0]||(s[0]=i=>l.value=i),type:y.value,"department-id":g.value,onSuccess:e(p)},null,8,["open","type","department-id","onSuccess"])]),_:1}))}}),fe=ee(te,[["__scopeId","data-v-7b147a4a"]]);export{fe as default};
