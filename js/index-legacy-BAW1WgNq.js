System.register(["./index-legacy-DWXZgdOb.js","./vue-vendor-legacy-ikyms0Ip.js","./skeleton-legacy-XkooQtmU.js","./index-legacy-D_zaI8lQ.js","./department.service-legacy-BkF3W9O-.js","./department-legacy-ZXh46dVA.js","./antd-vendor-legacy-DsFsidym.js","./_plugin-vue_export-helper-legacy-DgAO6S8O.js","./axios-vendor-legacy-B4nRALG8.js","./lodash-vendor-legacy-k_izlGWN.js"],(function(e,a){"use strict";var t,r,n,o,l,d,s,i,p,c,u,g,m,y,v,f,b,_,x,j,k,C,S,h,D,M,w,T,G,L,P;return{setters:[e=>{t=e.u,r=e.c,n=e._},e=>{o=e.d,l=e.a7,d=e.s,s=e.r,i=e.o,p=e.a4,c=e.a5,u=e.a6,g=e.u,m=e.ab,y=e.c,v=e.G,f=e.af,b=e.h,_=e.ag},e=>{x=e.Q},e=>{j=e.u},e=>{k=e.D},e=>{C=e.D},e=>{S=e.h,h=e.F,D=e.aa,M=e.J,w=e.y,T=e.M,G=e.ab,L=e.ac},e=>{P=e._},null,null],execute:function(){e("default",P(o({name:"DepartmentPage",__name:"index",setup(e){m((e=>({"35082fb2":2*g($).paddingLG+"px","004fa809":g($).colorBgContainer,"342b3036":`${g($).borderRadiusLG}px`,"1f512b16":g($).colorBorderSecondary,"218339ae":`${g($).paddingXXS}px`,"24a2dbb3":g(R)&&"transparent","00e3db7c":g(R)?g($).colorPrimary:g($).colorPrimaryHover})));const o=_((()=>n((()=>a.import("./modal-legacy-DZVtSqnI.js")),void 0))),{t:P}=l(),{token:$}=j(),B=d([]),E=s(),F=[{key:"addChild",label:P("department.operations.addChild")},{key:"edit",label:P("department.operations.edit")},{key:"delete",label:P("department.operations.delete")}],X=s(!1),A=s("addChild"),H=(e,a)=>{X.value=!0,A.value=e,E.value=a},{loading:I,run:J}=t(k.getCompanyDepartmentList,{onSuccess:e=>{B.value=C.toTree(e.data)}}),N=s(!1),{run:O}=t(k.deleteDepartment,{manual:!0,onSuccess:()=>{S.success(P("department.operations.operationMessage.deleteSuccess")),J()},onError:e=>{S.error(e.message||P("department.operations.operationMessage.deleteError"))},onFinally:()=>{N.value=!1}}),Q={addChild:e=>{H("addChild",e.toString())},edit:e=>{H("edit",e.toString())},delete:e=>{L.error({title:P("department.operations.operationMessage.deleteConfirmTitle"),content:P("department.operations.operationMessage.deleteConfirmContent"),okText:P("department.operations.operationMessage.confirmDelete"),closable:!0,cancelText:P("department.operations.operationMessage.cancelDelete"),onOk:async()=>(await O(e.toString()),null)})}},{isDark:R}=r();return i((async()=>{await J()})),(e,a)=>(c(),p(g(h),{class:"department-wrapper",justify:"center",align:"start"},{default:u((()=>[y(g(x),{loading:g(I),active:"",title:!1,paragraph:{rows:16}},{default:u((()=>[y(g(D),{class:"department-tree flex-1","default-expand-all":"",draggable:"","block-node":"","tree-data":B.value},{title:u((({title:a,managerName:t,key:r})=>[y(g(h),{class:"department-tree-item",justify:"space-between"},{default:u((()=>[y(g(M),null,{default:u((()=>[v(f(a),1)])),_:2},1024),y(g(h),{gap:"middle"},{default:u((()=>[y(g(M),{type:"secondary"},{default:u((()=>[v(f(t),1)])),_:2},1024),y(g(w),{overlay:b(g(T),{items:F,onClick:e=>((e,a)=>{Q[e.key](a)})(e,r)}),arrow:{pointAtCenter:!0}},{default:u((()=>[y(g(M),{type:"secondary"},{default:u((()=>[v(f(e.$t("department.operations.title"))+" ",1),y(g(G))])),_:1})])),_:2},1032,["overlay"])])),_:2},1024)])),_:2},1024)])),_:1},8,["tree-data"])])),_:1},8,["loading"]),y(g(o),{open:X.value,"onUpdate:open":a[0]||(a[0]=e=>X.value=e),type:A.value,"department-id":E.value,onSuccess:g(J)},null,8,["open","type","department-id","onSuccess"])])),_:1}))}}),[["__scopeId","data-v-7b147a4a"]]))}}}));
