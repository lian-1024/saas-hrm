import{d as C,ah as L,ab as S,u as e,ai as y,r as d,w as I,a4 as M,a5 as R,a6 as m,aj as T,c as p}from"./vue-vendor-BX3z0DRI.js";import{P as w,a as B}from"./permission-CdO8HJj6.js";import{R as u}from"./role.service-D1woDNaG.js";import{_ as b}from"./modal.vue_vue_type_script_setup_true_lang-BGdz2b2r.js";import{Q as G}from"./skeleton-BLzL0NKa.js";import{u as K}from"./index-BUvr80Hr.js";import{u as r}from"./index-BZBl1bBK.js";import{h as $,aa as D}from"./antd-vendor-ChGXved8.js";import{_ as q}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./axios-vendor-cIIFlI1p.js";import"./lodash-vendor-C1hxrrCz.js";const N={class:"permission-modal-wrapper"},Q=C({name:"GivePermissionModal",__name:"give-permission-modal",props:L({roleId:{}},{open:{type:Boolean,default:!1,required:!0},openModifiers:{}}),emits:["update:open"],setup(n){S(o=>({ae5d4188:"".concat(e(s).marginLG,"px"),"553a54a2":"".concat(e(s).paddingLG,"px"),cca96128:"".concat(e(s).borderRadiusLG,"px"),d1402fbc:e(s).colorBgContainer}));const{token:s}=K(),t=n,i=y(n,"open"),l=d(),a=d([]),{loading:f}=r(B.getPermissionList,{onSuccess:({data:o})=>{l.value=w.convertPermissionToTree(o)}}),{run:g}=r(u.getRoleDetail,{manual:!0,onSuccess:({data:o})=>{a.value=o.permIds}}),{loading:v,run:_}=r(u.givePermission,{manual:!0,onSuccess:()=>{$.success("分配权限成功")},onFinally:()=>{i.value=!1}}),h=()=>{_({id:t.roleId,permIds:a.value})},P=()=>i.value=!1,k=()=>P();return I(()=>t.roleId,o=>{o&&g(o)},{immediate:!0}),(o,c)=>(R(),M(e(b),{title:"分配权限",open:i.value,"confirm-loading":e(v),onOk:h,onCancel:k,width:400},{default:m(()=>[T("div",N,[p(e(G),{loading:e(f),title:!1,paragraph:{rows:8}},{default:m(()=>[p(e(D),{checkedKeys:a.value,"onUpdate:checkedKeys":c[0]||(c[0]=x=>a.value=x),checkable:"","tree-data":l.value},null,8,["checkedKeys","tree-data"])]),_:1},8,["loading"])])]),_:1},8,["open","confirm-loading"]))}}),X=q(Q,[["__scopeId","data-v-f65464f7"]]);export{X as default};
