System.register(["./vue-vendor-legacy-x9FjLCOD.js","./modal.vue_vue_type_script_setup_true_lang-legacy-7ayigm6Q.js","./index-legacy-CHUU-5It.js","./index-legacy-FCYPyWIL.js","./message-legacy-ZD6EJ5PZ.js","./employee.service-legacy-O6MHfj5Y.js","./antd-vendor-legacy-C9XdHwF7.js","./_plugin-vue_export-helper-legacy-DgAO6S8O.js","./axios-vendor-legacy-B4nRALG8.js","./lodash-vendor-legacy-D6Hi_gR3.js"],(function(e,a){"use strict";var l,o,s,t,n,i,u,r,c,m,p,d,v,y,g,f,_,b,N,j,I,x,T,h,k,F,O,w,C,A,E,R;return{setters:[e=>{l=e.d,o=e.af,s=e.a9,t=e.u,n=e.ag,i=e.r,u=e.w,r=e.a5,c=e.j,m=e.a,p=e.a2,d=e.a3,v=e.a4,y=e.c,g=e.a7,f=e.F,_=e.aj,b=e.G,N=e.ad},e=>{j=e._},e=>{I=e.u},e=>{x=e.c,T=e.u},e=>{h=e.b},e=>{k=e.E},e=>{F=e.h,O=e.F,w=e.u,C=e.aj,A=e.an,E=e.al},e=>{R=e._},null,null],execute:function(){const a=l({__name:"mass-notification",props:o({employees:{}},{open:{type:Boolean,default:!1},openModifiers:{}}),emits:["update:open"],setup(e){s((e=>({"1b77d3a6":`${t(o).margin}px`,"84c22ca2":`${t(o).padding}px`,"7d9d962b":t(o).colorBorder,"3bf43951":`${t(o).borderRadiusLG}px`})));const a=n(e,"open"),l=e,{token:o}=I(),{isDark:R}=x(),S=i(l.employees);u([()=>l.employees,()=>a.value],(([e,a])=>{a&&(S.value=U(e))}));const U=e=>e.map((e=>({id:e.id,username:`@${e.username}`}))),{t:$}=r(),G=c((()=>[{label:$("common.message.level.notification"),value:h.NOTIFICATION},{label:$("common.message.level.tips"),value:h.TIPS},{label:$("common.message.level.important"),value:h.IMPORTANT},{label:$("common.message.level.urgent"),value:h.URGENT}])),L=m({type:h.NOTIFICATION,content:""}),q=i(),B={type:[{required:!0,message:$("employee.massNotification.rules.messageLevel")}],content:[{required:!0,message:$("employee.massNotification.rules.content")}]},D=()=>{a.value=!1,q.value&&(q.value.resetFields(),S.value=[])},{run:M,loading:P}=T(k.massNotification,{manual:!0,onSuccess:()=>{F.success($("employee.messages.massNotificationSuccess"))},onError:({message:e})=>{e.error(e||$("employee.messages.massNotificationError"))},onFinally:()=>{D()}}),J=async()=>{q.value&&await q.value.validate().then((e=>{M({...L,userIds:S.value.map((e=>e.id))})}))},z=()=>{D()},H={span:6},K={span:16};return(e,l)=>(d(),p(t(j),{title:t($)("employee.massNotification.title"),open:a.value,"onUpdate:open":l[2]||(l[2]=e=>a.value=e),"confirm-loading":t(P),onOk:J,onCancel:z,mask:""},{default:v((()=>[y(t(O),{vertical:""},{default:v((()=>[y(t(O),{wrap:"wrap",gap:"small",class:"mass-selected-employee"},{default:v((()=>[(d(!0),g(f,null,_(S.value,(e=>(d(),p(t(w),{color:t(R)?"default":"processing",key:e.id,closable:"",onClose:a=>{return l=e.id,void(S.value=S.value.filter((e=>e.id!==l)));var l}},{default:v((()=>[b(N(e.username),1)])),_:2},1032,["color","onClose"])))),128))])),_:1})])),_:1}),y(t(C),{rules:B,ref_key:"formRef",ref:q,model:L,"label-col":H,"wrapper-col":K},{default:v((()=>[y(t(C).Item,{label:t($)("employee.massNotification.messageLevel"),name:"type"},{default:v((()=>[y(t(A),{value:L.type,"onUpdate:value":l[0]||(l[0]=e=>L.type=e),options:G.value},null,8,["value","options"])])),_:1},8,["label"]),y(t(C).Item,{label:t($)("employee.massNotification.content"),name:"content"},{default:v((()=>[y(t(E).TextArea,{value:L.content,"onUpdate:value":l[1]||(l[1]=e=>L.content=e),placeholder:t($)("employee.massNotification.rules.content")},null,8,["value","placeholder"])])),_:1},8,["label"])])),_:1},8,["model"])])),_:1},8,["title","open","confirm-loading"]))}});e("default",R(a,[["__scopeId","data-v-183557d2"]]))}}}));
