import{E as v}from"./employee.service-C0m8ECzY.js";import{R as B}from"./role.service-BC77x9tf.js";import{_ as L}from"./modal.vue_vue_type_script_setup_true_lang-BwdYvTp8.js";import{Q as b}from"./spin-f7H7F6Je.js";import{u as d}from"./index-CI1igBQZ.js";import{d as w,af as D,a5 as N,ag as V,r as y,k as j,j as F,a2 as G,a3 as Q,a4 as l,c as t,u as e,ah as U,G as _,ad as E}from"./vue-vendor-I_PSXyJa.js";import{h as m,$,F as q,B as M}from"./antd-vendor-T3zku5__.js";import{_ as O}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./index-YJ2Yz_0y.js";import"./axios-vendor-cIIFlI1p.js";import"./lodash-vendor-DOy_biNW.js";const T={class:"modal-content"},z=w({name:"RoleModal",__name:"role-modal",props:D({employeeId:{}},{open:{default:!1},openModifiers:{}}),emits:["update:open"],setup(c){const{t:s}=N(),r=c,i=V(c,"open"),n=y([]),u=y([]),{loading:R}=d(B.getRoleListEnable,{onSuccess:({data:o})=>{u.value=o.map(a=>({value:a.id,label:a.name}))}}),{run:I,loading:C}=d(v.getEmployeeDetailById,{manual:!0,onSuccess:({data:o})=>{n.value=o.roleIds}}),{run:S,loading:k}=d(v.giveEmployeeRole,{manual:!0,onSuccess:()=>{m.success(s("employee.roleModal.success"))},onError:o=>{o.message?m.error(o.message):m.error(s("employee.roleModal.error"))}}),f=()=>{i.value=!1},x=async()=>{await S({id:r.employeeId,roleIds:n.value}),f()},g=()=>{f()};j(()=>{r.employeeId&&I(r.employeeId)});const h=F(()=>R.value||C.value);return(o,a)=>(Q(),G(e(L),{"confirm-loading":e(k),width:800,mask:"",open:i.value,"onUpdate:open":a[1]||(a[1]=p=>i.value=p),title:e(s)("employee.roleModal.title"),onCancel:g},{footer:l(()=>[t(e(q),{gap:"small",justify:"center"},{default:l(()=>[t(e(M),{type:"primary",onClick:x},{default:l(()=>[_(E(e(s)("employee.roleModal.confirm")),1)]),_:1}),t(e(M),{onClick:g},{default:l(()=>[_(E(e(s)("employee.roleModal.cancel")),1)]),_:1})]),_:1})]),default:l(()=>[t(e(b),{spinning:h.value},{default:l(()=>[U("div",T,[t(e($),{value:n.value,"onUpdate:value":a[0]||(a[0]=p=>n.value=p),options:u.value},null,8,["value","options"])])]),_:1},8,["spinning"])]),_:1},8,["confirm-loading","open","title"]))}}),ae=O(z,[["__scopeId","data-v-21a6f2d1"]]);export{ae as default};
