System.register(["./index-legacy-FCYPyWIL.js","./vue-vendor-legacy-x9FjLCOD.js","./skeleton-legacy-KE-_dRl6.js","./index-legacy-CHUU-5It.js","./index-legacy-JyVfonfR.js","./generate-menu-item-legacy-SOaWgP50.js","./antd-vendor-legacy-C9XdHwF7.js","./_plugin-vue_export-helper-legacy-DgAO6S8O.js"],(function(e,a){"use strict";var t,n,s,l,d,r,o,c,i,u,p,g,m,y,v,f,_,j,b,h,x,w,C,S,k,O,L,$,B,F,K,M,T,q;return{setters:[e=>{t=e.u,n=e._},e=>{s=e.d,l=e.a9,d=e.u,r=e.ag,o=e.s,c=e.a,i=e.r,u=e.j,p=e.a5,g=e.o,m=e.a2,y=e.a3,v=e.a4,f=e.c,_=e.G,j=e.ad,b=e.ah,h=e.ae,x=e.a8},e=>{w=e.Q},e=>{C=e.u},e=>{S=e.a},e=>{k=e.g},e=>{O=e.h,L=e.F,$=e.B,B=e.M,F=e.O,K=e.aH,M=e.aI,T=e.aJ},e=>{q=e._}],execute:function(){const E=e("c",(e=>{switch(!0){case e<1e3:return`${e}米`;case e>=1e3&&e<1e6:return`${(e/1e3).toFixed(2)}公里`;default:return`${(e/1e6).toFixed(2)}百万公里`}})),G={class:"flex-1 h-full"},I={class:"attendance-scope-company-list flex-1"},U=s({__name:"drawer",props:{open:{type:Boolean,required:!1},openModifiers:{}},emits:["update:open"],setup(e){l((e=>({"59e3a1cc":`${d(ee).borderRadiusLG}px`,"281f73b4":d(ee).colorBgContainer})));const s=h((()=>n((()=>a.import("./map-legacy-DQmIiylI.js")),void 0))),q=r(e,"open"),U=()=>{q.value=!1},z=(e=0)=>ae("attendance.drawer.radiusTip",{distance:E(e)}),A=o(),H=o([]),J=c({address:"",id:0,phone:"",name:"",point:[],radius:0}),{run:N,loading:P}=t(S.getCompanyList,{manual:!0,onSuccess:({data:e})=>{H.value=e,A.value=e.map((e=>k(e.id.toString(),e.name))),Object.assign(J,e[0])}}),Q=i(),R=e=>H.value.filter((a=>a.id===Number(e)))[0],D=e=>{Object.assign(J,R(e.key))},V=e=>{((e,a)=>{const t=R(a);Object.assign(t,e)})(J,J.id)},W=u((()=>({lat:J.point[1],lng:J.point[0]}))),{run:X,loading:Y}=t(S.updateCompanyList,{manual:!0,onSuccess:()=>{O.success(ae("attendance.drawer.messages.updateSuccess")),U()},onError:({message:e})=>{e.error(e||ae("attendance.drawer.messages.updateError"))}}),Z=()=>{X({list:H.value})};g((async()=>{await N()}));const{token:ee}=C(),{t:ae}=p();return(e,a)=>(y(),m(d(T),{height:"100vh",onClose:U,title:d(ae)("attendance.drawer.title"),open:q.value,placement:"top",closable:!1},{extra:v((()=>[f(d(M),{onClick:U,style:x({color:d(ee).colorText})},null,8,["style"])])),default:v((()=>[f(d(L),{class:"h-full",gap:"middle"},{default:v((()=>[b("div",G,[f(d(s),{"scoped-radius":J.radius,"scoped-center":W.value},null,8,["scoped-radius","scoped-center"])]),f(d(L),{class:"attendance-scope-right",vertical:"",gap:"middle"},{default:v((()=>[f(d(w),{loading:d(P),active:"",title:!1,paragraph:{rows:8}},{default:v((()=>[b("div",I,[f(d(B),{class:"attendance-scope-company-list-inner",selectedKeys:Q.value,"onUpdate:selectedKeys":a[0]||(a[0]=e=>Q.value=e),items:A.value,onClick:D},null,8,["selectedKeys","items"])])])),_:1},8,["loading"]),b("div",null,[f(d(F),{type:"secondary"},{default:v((()=>[_(j(d(ae)("attendance.drawer.radius")),1)])),_:1}),f(d(K),{onAfterChange:V,max:1e3,value:J.radius,"onUpdate:value":a[1]||(a[1]=e=>J.radius=e),"tip-formatter":z},null,8,["value"])])])),_:1})])),_:1})])),footer:v((()=>[f(d(L),{justify:"end",gap:"middle"},{default:v((()=>[f(d($),{onClick:U},{default:v((()=>[_(j(d(ae)("attendance.drawer.buttons.cancel")),1)])),_:1}),f(d($),{type:"primary",onClick:Z,loading:d(Y)},{default:v((()=>[_(j(d(ae)("attendance.drawer.buttons.batchSave")),1)])),_:1},8,["loading"])])),_:1})])),_:1},8,["title","open"]))}}),z=q(U,[["__scopeId","data-v-49ddc1eb"]]),A=Object.freeze(Object.defineProperty({__proto__:null,default:z},Symbol.toStringTag,{value:"Module"}));e("d",A)}}}));
