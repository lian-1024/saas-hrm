System.register(["./vue-vendor-legacy-x9FjLCOD.js","./index-legacy-FCYPyWIL.js","./department.service-legacy-BkPFY2K_.js","./employee.service-legacy-O6MHfj5Y.js","./spin-legacy-NTWxnDiJ.js","./index-legacy-CHUU-5It.js","./department-legacy-ZXh46dVA.js","./antd-vendor-legacy-C9XdHwF7.js","./_plugin-vue_export-helper-legacy-DgAO6S8O.js","./axios-vendor-legacy-B4nRALG8.js","./lodash-vendor-legacy-D6Hi_gR3.js"],(function(e,l){"use strict";var a,r,o,t,m,s,d,n,i,u,p,f,c,y,g,v,b,h,E,_,O,j,w,k,q,D,x,I,U,S,T,Y,F,N,P,C,L,M,z,B;return{setters:[e=>{a=e.d,r=e.a9,o=e.a5,t=e.a,m=e.r,s=e.Z,d=e.j,n=e.o,i=e.a2,u=e.a3,p=e.a4,f=e.c,c=e.u,y=e.a7,g=e.ah,v=e.ad,b=e.G},e=>{h=e.u,E=e.r},e=>{_=e.D},e=>{O=e.F,j=e.E},e=>{w=e.Q},e=>{k=e.u},e=>{q=e.D},e=>{D=e.h,x=e.F,I=e.aj,U=e.ak,S=e.al,T=e.am,Y=e.an,F=e.ao,N=e.ap,P=e.aq,C=e.ar,L=e.as,M=e.at,z=e.B},e=>{B=e._},null,null],execute:function(){const l=["src"],R={key:1},G={class:"ant-upload-text"};e("default",B(a({name:"EmployeeDetailPage",__name:"index",setup(e){r((e=>({"3a285901":`${c(B).paddingLG}px`,"07b52918":c(B).colorBgContainer})));const{t:a}=o(),{token:B}=k(),$={id:1,workNumber:"",mobile:"",departmentId:1,correctionTime:"",formOfEmployment:O.Formal,staffPhoto:"",timeOfEntry:"",username:""},A=t($),Q=m([]),Z=s(),H=m([]),J={span:8},K={span:16},V={username:[{required:!0,message:a("employee.detail.form.rules.username.required"),trigger:"blur"},{min:2,max:4,message:a("employee.detail.form.rules.username.length"),trigger:"blur"}],mobile:[{required:!0,message:a("employee.detail.form.rules.mobile.required"),trigger:"blur"},{pattern:/^1[3-9]\d{9}$/,message:a("employee.detail.form.rules.mobile.format"),trigger:"blur"}],timeOfEntry:[{required:!0,message:a("employee.detail.form.rules.timeOfEntry.required"),trigger:"change"},{type:"date",message:a("employee.detail.form.rules.timeOfEntry.format"),trigger:"change"}],correctionTime:[{required:!0,message:a("employee.detail.form.rules.correctionTime.required"),trigger:"change"},{type:"date",message:a("employee.detail.form.rules.correctionTime.format"),trigger:"change"}],departmentId:[{required:!0,message:a("employee.detail.form.rules.department.required"),trigger:"change"}],formOfEmployment:[{required:!0,message:a("employee.detail.form.rules.formOfEmployment.required"),trigger:"change"}]},W=m(null),X=m([]),ee=m(!1),le=m(""),ae=e=>{"uploading"!==e.file.status?("done"===e.file.status&&function(e,l){const a=new FileReader;a.addEventListener("load",(()=>l(a.result))),a.readAsDataURL(e)}(e.file.originFileObj,(e=>{le.value=e,ee.value=!1})),"error"===e.file.status&&(ee.value=!1,D.error("upload error"))):ee.value=!0},re=e=>{const l="image/jpeg"===e.type||"image/png"===e.type;l||D.error(a("employee.detail.upload.error.type"));const r=e.size/1024/1024<2;return r||D.error(a("employee.detail.upload.error.size")),l&&r},{run:oe,loading:te}=h(j.getEmployeeDetailById,{manual:!0,onSuccess:({data:e})=>{console.log(e),Object.assign(A,e),Q.value=[e.departmentId.toString()]}}),{loading:me}=h(_.getCompanyDepartmentList,{onSuccess:({data:e})=>{console.log(e),H.value=q.toCascader(e)}}),se=d((()=>te.value||me.value)),{run:de,loading:ne}=h(j.updateEmployeeDetail,{manual:!0,onSuccess:()=>{D.success(a("employee.messages.updateSuccess"))},onError:e=>{D.error(e.message||a("employee.messages.updateError"))}}),{run:ie,loading:ue}=h(j.addEmployee,{manual:!0,onSuccess:()=>{D.success(a("employee.messages.addSuccess")),E.push("/employee")},onError:e=>{D.error(e.message||a("employee.messages.addError"))}}),pe=d((()=>ne.value||ue.value)),fe=[{label:a("employee.table.formalOfEmployment.formal"),value:O.Formal},{label:a("employee.table.formalOfEmployment.informal"),value:O.InFormal}],ce=()=>{const e=Number(Q.value.slice(-1)[0]);A.departmentId=e,W.value?.validate().then((l=>{if(Z.params.id)de(Z.params.id,{...A,departmentId:e});else{const{id:l,...a}=A;ie({...a,departmentId:e})}}))};return n((async()=>{Z.params.id&&await oe(Z.params.id)})),(e,r)=>(u(),i(c(w),{spinning:se.value},{default:p((()=>[f(c(x),{class:"detail-wrapper h-full",justify:"star"},{default:p((()=>[f(c(I),{ref_key:"formRef",ref:W,rules:V,class:"detail-form",model:A,"label-col":J,"wrapper-col":K},{default:p((()=>[f(c(U),{label:c(a)("employee.detail.form.fields.username"),name:"username"},{default:p((()=>[f(c(S),{value:A.username,"onUpdate:value":r[0]||(r[0]=e=>A.username=e),placeholder:c(a)("employee.detail.form.placeholder.username")},null,8,["value","placeholder"])])),_:1},8,["label"]),f(c(U),{label:c(a)("employee.detail.form.fields.workNumber"),name:"workNumber"},{default:p((()=>[f(c(S),{value:A.workNumber,"onUpdate:value":r[1]||(r[1]=e=>A.workNumber=e),disabled:""},null,8,["value"])])),_:1},8,["label"]),f(c(U),{label:c(a)("employee.detail.form.fields.mobile"),name:"mobile"},{default:p((()=>[f(c(S),{value:A.mobile,"onUpdate:value":r[2]||(r[2]=e=>A.mobile=e),disabled:!!c(Z).params.id},null,8,["value","disabled"])])),_:1},8,["label"]),f(c(U),{label:c(a)("employee.detail.form.fields.department"),name:"departmentId"},{default:p((()=>[f(c(T),{"display-render":({labels:e})=>e.join("-"),placeholder:c(a)("employee.detail.form.placeholder.department"),options:H.value,value:Q.value,"onUpdate:value":r[3]||(r[3]=e=>Q.value=e)},null,8,["display-render","placeholder","options","value"])])),_:1},8,["label"]),f(c(U),{label:c(a)("employee.detail.form.fields.formOfEmployment"),name:"formOfEmployment"},{default:p((()=>[f(c(Y),{placeholder:c(a)("employee.detail.form.placeholder.formOfEmployment"),value:A.formOfEmployment,"onUpdate:value":r[4]||(r[4]=e=>A.formOfEmployment=e),options:fe},null,8,["placeholder","value"])])),_:1},8,["label"]),f(c(U),{label:c(a)("employee.detail.form.fields.timeOfEntry"),name:"timeOfEntry"},{default:p((()=>[f(c(F),{"value-format":"YYYY-MM-DD",value:A.timeOfEntry,"onUpdate:value":r[5]||(r[5]=e=>A.timeOfEntry=e)},null,8,["value"])])),_:1},8,["label"]),f(c(U),{label:c(a)("employee.detail.form.fields.correctionTime"),name:"correctionTime"},{default:p((()=>[f(c(F),{"value-format":"YYYY-MM-DD",value:A.correctionTime,"onUpdate:value":r[6]||(r[6]=e=>A.correctionTime=e)},null,8,["value"])])),_:1},8,["label"]),f(c(U),{label:c(a)("employee.detail.form.fields.staffPhoto"),name:"staffPhoto"},{default:p((()=>[f(c(N),{"file-list":X.value,"onUpdate:fileList":r[7]||(r[7]=e=>X.value=e),name:"avatar","list-type":"picture-card",class:"avatar-uploader","show-upload-list":!1,action:"https://www.mocky.io/v2/5cc8019d300000980a055e76","before-upload":re,onChange:ae},{default:p((()=>[A.staffPhoto?(u(),y("img",{key:0,class:"w-full h-full",src:A.staffPhoto,alt:"avatar"},null,8,l)):(u(),y("div",R,[ee.value?(u(),i(c(P),{key:0})):(u(),i(c(C),{key:1})),g("div",G,v(c(a)("employee.detail.upload.text")),1)]))])),_:1},8,["file-list"])])),_:1},8,["label"]),f(c(U),null,{default:p((()=>[f(c(L),null,{default:p((()=>[f(c(M),{span:12}),f(c(M),null,{default:p((()=>[f(c(z),{type:"primary",onClick:ce,loading:pe.value},{default:p((()=>[b(v(c(Z).params.id?c(a)("employee.detail.form.buttons.update"):c(a)("employee.detail.form.buttons.save")),1)])),_:1},8,["loading"])])),_:1})])),_:1})])),_:1})])),_:1},8,["model"])])),_:1})])),_:1},8,["spinning"]))}}),[["__scopeId","data-v-c0f21f24"]]))}}}));
