import{d as S,a9 as U,a5 as b,aj as l,a7 as y,r as f,a as B,a4 as x,u as e,an as L,a6 as t,c as n,G as v,af as c,o as N,f as P,ab as T,ac as E}from"./vue-vendor-BX3z0DRI.js";import{u as z}from"./index-BUvr80Hr.js";import{_ as F}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{d as A,u as I,U as w}from"./index-Dae1U06w.js";import{ag as g,ai as R,Z as D,a8 as K,B as $,au as V,X as j,F as H}from"./antd-vendor-ChGXved8.js";import{Q as d}from"./index-0Hf0PmIo.js";import"./axios-vendor-cIIFlI1p.js";import"./lodash-vendor-C1hxrrCz.js";const M="/saas-hrm/images/login_back-BLUAlTsq.png",X={class:"hero"},G=S({name:"SignInHero",__name:"hero",setup(k){return(s,o)=>(b(),U("div",X,o[0]||(o[0]=[l("img",{class:"hero-img",src:M,alt:"hero"},null,-1)])))}}),Z=F(G,[["__scopeId","data-v-ab61c7eb"]]),J=S({__name:"mobile-form",setup(k){const{t:s}=y(),o=f(),a=B({mobile:"13800000002",password:"hm#qd@23!",isAgree:!0}),p={mobile:[{required:!0,message:s("user.mobileForm.rules.mobile.required")},{pattern:/^1[3-9]\d{9}$/,message:s("user.mobileForm.rules.mobile.format")}],password:[{required:!0,message:s("user.mobileForm.rules.password.required")},{min:6,message:s("user.mobileForm.rules.password.minLength")}],isAgree:[{validator:(_,r)=>r?Promise.resolve():Promise.reject(s("user.mobileForm.rules.agreement.required"))}]},i=A(),h=async _=>{await i.login(_)},C={labelCol:{span:0},wrapperCol:{span:24}};return(_,r)=>(b(),x(e(g),L({ref_key:"formRef",ref:o,model:a,rules:p},C,{onFinish:h}),{default:t(()=>[n(e(g).Item,{name:"mobile"},{default:t(()=>[n(e(R),{value:a.mobile,"onUpdate:value":r[0]||(r[0]=u=>a.mobile=u),size:"large",placeholder:e(s)("user.mobileForm.placeholder.mobile")},{prefix:t(()=>r[3]||(r[3]=[l("span",{class:"anticon"},[l("i",{class:"iconfont icon-phone"})],-1)])),_:1},8,["value","placeholder"])]),_:1}),n(e(g).Item,{name:"password"},{default:t(()=>[n(e(R).Password,{value:a.password,"onUpdate:value":r[1]||(r[1]=u=>a.password=u),size:"large",placeholder:e(s)("user.mobileForm.placeholder.password")},{prefix:t(()=>r[4]||(r[4]=[l("span",{class:"anticon"},[l("i",{class:"iconfont icon-lock"})],-1)])),_:1},8,["value","placeholder"])]),_:1}),n(e(g).Item,{name:"isAgree"},{default:t(()=>[n(e(D),{checked:a.isAgree,"onUpdate:checked":r[2]||(r[2]=u=>a.isAgree=u)},{default:t(()=>[v(c(e(s)("user.mobileForm.agreement.text"))+" ",1),n(e(K),null,{default:t(()=>[v(c(e(s)("user.mobileForm.agreement.link")),1)]),_:1})]),_:1},8,["checked"])]),_:1}),n(e(g).Item,null,{default:t(()=>[n(e($),{loading:e(i).loginLoading,type:"primary","html-type":"submit",block:"",size:"large"},{default:t(()=>[v(c(e(s)("user.mobileForm.button.login")),1)]),_:1},8,["loading"])]),_:1})]),_:1},16,["model"]))}}),O={class:"qrcode-form"},W={class:"qrcode-wrapper"},Y={class:"qrcode-tip"},ee=S({__name:"qrcode-form",setup(k){const{t:s}=y(),o=f(""),a=f(),p=A(),i=f(),h={[d.UN_SCAN]:"active",[d.SCANED]:"scanned",[d.SUCCESS]:"scanned",[d.EXPIRED]:"expired",[d.CANCEL]:"expired"},{run:C,loading:_}=I(w.getQRCodeKey,{manual:!0,onSuccess:({data:m})=>{o.value=m,u()}}),{run:r}=I(w.getQRCodeStatus,{manual:!0,onSuccess:({data:m})=>{i.value=h[m.status],Number(m.status)===d.SUCCESS&&(q(),p.login(m))}}),u=()=>{q(),a.value=setInterval(()=>{o.value&&r(o.value)},3e3)},q=()=>{a.value&&(clearInterval(a.value),a.value=void 0)},Q=()=>{C()};return N(async()=>{i.value="loading",await C(),i.value="active"}),P(()=>{q()}),(m,le)=>(b(),U("div",O,[l("div",W,[n(e(V),{value:o.value,status:i.value},null,8,["value","status"]),l("p",Y,c(e(s)("user.qrcodeForm.tip")),1)]),n(e($),{type:"primary",loading:e(_),block:"",size:"large",onClick:Q},{default:t(()=>[v(c(e(s)("user.qrcodeForm.button.refresh")),1)]),_:1},8,["loading"])]))}}),se=F(ee,[["__scopeId","data-v-ce6d720a"]]),oe={class:"sign-in-form"},ae={class:"sign-in-form-wrapper"},re={class:"sign-in-form-component"},te={class:"sign-in-form-footer"},ne=S({name:"SignInPage",__name:"index",setup(k){T(i=>({"3a8ab996":e(p).colorBgContainer}));const{t:s}=y(),o=f("mobile"),a=()=>{o.value=o.value==="mobile"?"qrcode":"mobile"},{token:p}=z();return(i,h)=>(b(),x(e(H),{class:"sign-in"},{default:t(()=>[n(Z,{class:"sign-in-hero"}),l("div",oe,[l("div",ae,[n(e(j),{level:3,class:"sign-in-form-title"},{default:t(()=>[v(c(e(s)("user.signIn.title.".concat(o.value))),1)]),_:1}),l("div",re,[(b(),x(E(o.value==="mobile"?J:se)))]),l("div",te,[l("a",{onClick:a},c(e(s)("user.signIn.switchType.".concat(o.value))),1)])])])]),_:1}))}}),fe=F(ne,[["__scopeId","data-v-d8689cb4"]]);export{fe as default};
