System.register(["./index-legacy-DWXZgdOb.js","./vue-vendor-legacy-ikyms0Ip.js","./spin-legacy-CX9iz6gd.js","./index-legacy-D_zaI8lQ.js","./role.service-legacy-BaxOUdnW.js","./antd-vendor-legacy-DsFsidym.js","./_plugin-vue_export-helper-legacy-DgAO6S8O.js","./axios-vendor-legacy-B4nRALG8.js","./lodash-vendor-legacy-k_izlGWN.js"],(function(e,a){"use strict";var l,t,o,n,i,r,s,d,c,u,p,y,g,v,m,k,f,b,_,C,x,j,w,S,$,h,R,I,M,B,U,z,E,G,F,L;return{setters:[e=>{l=e.u,t=e._},e=>{o=e.d,n=e.ab,i=e.u,r=e.a7,s=e.r,d=e.a,c=e.j,u=e.o,p=e.a4,y=e.a5,g=e.a6,v=e.c,m=e.G,k=e.af,f=e.a9,b=e.aq,_=e.F,C=e.ag},e=>{x=e.Q},e=>{j=e.u},e=>{w=e.R},e=>{S=e.h,$=e.B,h=e.$,R=e.ai,I=e.as,M=e.S,B=e.r,U=e.F,z=e.a8,E=e.ae,G=e.J,F=e.at},e=>{L=e._},null,null],execute:function(){e("default",L(o({name:"RolePage",__name:"index",setup(e){n((e=>({"2daf96c4":`${i(L).paddingLG}px`,a9b571de:i(L).colorBgContainer,"1866eddd":`${i(L).borderRadiusLG}px`,"2c937506":i(L).colorBorderSecondary})));const{t:o}=r(),{token:L}=j(),O=C((()=>t((()=>a.import("./add-role-modal-legacy-CSeMMGYS.js")),void 0))),P=C((()=>t((()=>a.import("./give-permission-modal-legacy-RAsZAtCz.js")),void 0))),T=["name","state","description"],q=[{title:o("role.table.columns.key"),dataIndex:"id",key:"key"},{title:o("role.table.columns.role"),dataIndex:"name",key:"name"},{title:o("role.table.columns.status"),dataIndex:"state",key:"state"},{title:o("role.table.columns.description"),dataIndex:"description",key:"description"},{title:o("role.table.columns.actions"),key:"actions"}],H=s(!1),J=s(),Q=s({total:0,rows:[]}),A=d({page:1,pagesize:10}),D=s(!1),K=d({}),{run:N,loading:V}=l((()=>w.getRoleList(A)),{manual:!0,onSuccess:({data:e})=>{Q.value=e}}),{run:W,loading:X}=l(w.updateRole,{manual:!0,onSuccess:()=>{S.success(o("role.table.operationMessage.editRoleSuccess"))},onError:e=>{S.error(e.message||o("role.table.operationMessage.editRoleError"))}}),{run:Y}=l(w.deleteRoleById,{manual:!0,onSuccess:()=>{S.success(o("role.table.operationMessage.deleteRoleSuccess")),N()},onError:e=>{S.error(e.message||o("role.table.operationMessage.deleteRoleError"))}}),Z=async(e,a)=>{A.page=e,A.pagesize=a,await N(A)},ee=["bottomCenter"],ae=["5","10","20","30","40","50"],le=()=>{const e=Math.ceil((Q.value.total+1)/A.pagesize);A.page=e,N(A)},te=c((()=>e=>1===K[e]?.state));return u((async()=>{await N()})),(e,a)=>(y(),p(i(U),{class:"role-wrapper",vertical:"",align:"start",gap:"middle"},{default:g((()=>[v(i($),{type:"primary",onClick:a[0]||(a[0]=e=>D.value=!0)},{default:g((()=>[m(k(e.$t("role.table.actions.addRole")),1)])),_:1}),v(i(x),{spinning:i(V)||i(X),"wrapper-class-name":"flex-1 w-full"},{default:g((()=>[v(i(h),{class:"w-full",pagination:{position:ee,pageSizeOptions:ae,onChange:Z,total:Q.value.total,current:A.page},columns:q,dataSource:Q.value.rows,bordered:""},{headerCell:g((({title:e})=>[v(i(G),{type:"secondary"},{default:g((()=>[m(k(e),1)])),_:2},1024)])),bodyCell:g((({column:a,record:l,text:t})=>[T.includes(String(a.dataIndex))?(y(),f(_,{key:0},[K[l.id]?(y(),f(_,{key:0},["name"===a.key?(y(),p(i(R),{key:0,value:K[l.id][a.key],"onUpdate:value":e=>K[l.id][a.key]=e},null,8,["value","onUpdate:value"])):"description"===a.key?(y(),p(i(I),{key:1,value:K[l.id][a.key],"onUpdate:value":e=>K[l.id][a.key]=e},null,8,["value","onUpdate:value"])):"state"===a.key?(y(),p(i(M),{key:2,checked:te.value(l.id),onChange:e=>((e,a)=>{K[a.id].state=e?1:0})(e,l)},null,8,["checked","onChange"])):b("",!0)],64)):(y(),f(_,{key:1},["state"===a.key?(y(),p(i(B),{key:0,color:Boolean(l.state)?"blue":"default"},{default:g((()=>[m(k(Boolean(l.state)?e.$t("common.enable.enable"):e.$t("common.enable.disable")),1)])),_:2},1032,["color"])):(y(),f(_,{key:1},[m(k(t),1)],64))],64))],64)):b("",!0),"actions"===a.key?(y(),p(i(U),{key:1,gap:"small",wrap:"wrap"},{default:g((()=>[K[l.id]?(y(),f(_,{key:1},[v(i(z),{onClick:e=>(async e=>{const a=K[e];W(a).then((()=>Object.assign(Q.value.rows.filter((a=>a.id===e))[0],a))).finally((()=>{delete K[e]}))})(l.id)},{default:g((()=>[m(k(e.$t("role.table.actions.save")),1)])),_:2},1032,["onClick"]),v(i(E),{title:e.$t("role.table.operationMessage.cancelConfirmTitle"),onConfirm:e=>{return a=l.id,void delete K[a];var a}},{default:g((()=>[v(i(z),null,{default:g((()=>[m(k(e.$t("role.table.actions.cancel")),1)])),_:1})])),_:2},1032,["title","onConfirm"])],64)):(y(),f(_,{key:0},[v(i(z),{onClick:e=>{return a=l.id,J.value=a,void(H.value=!0);var a}},{default:g((()=>[m(k(e.$t("role.table.actions.givePermission")),1)])),_:2},1032,["onClick"]),v(i(z),{onClick:e=>{return a=l.id,void(K[a]=F(Q.value.rows.filter((e=>e.id===a))[0]));var a}},{default:g((()=>[m(k(e.$t("role.table.actions.edit")),1)])),_:2},1032,["onClick"]),v(i(E),{title:i(o)("role.table.operationMessage.deleteConfirmTitle"),onConfirm:e=>(async e=>{J.value=e,await Y(e)})(l.id)},{default:g((()=>[v(i(z),null,{default:g((()=>[m(k(e.$t("role.table.actions.delete")),1)])),_:1})])),_:2},1032,["title","onConfirm"])],64))])),_:2},1024)):b("",!0)])),_:1},8,["pagination","dataSource"])])),_:1},8,["spinning"]),v(i(O),{onSuccess:le,open:D.value,"onUpdate:open":a[1]||(a[1]=e=>D.value=e)},null,8,["open"]),v(i(P),{"role-id":J.value,open:H.value,"onUpdate:open":a[2]||(a[2]=e=>H.value=e)},null,8,["role-id","open"])])),_:1}))}}),[["__scopeId","data-v-d0294372"]]))}}}));
