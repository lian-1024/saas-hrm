System.register(["./index-legacy-FCYPyWIL.js","./vue-vendor-legacy-x9FjLCOD.js","./skeleton-legacy-KE-_dRl6.js","./index-legacy-CHUU-5It.js","./department.service-legacy-BkPFY2K_.js","./department-legacy-ZXh46dVA.js","./antd-vendor-legacy-C9XdHwF7.js","./_plugin-vue_export-helper-legacy-DgAO6S8O.js","./axios-vendor-legacy-B4nRALG8.js","./lodash-vendor-legacy-D6Hi_gR3.js"],(function(e,a){"use strict";var t,r,n,o,l,d,s,i,p,c,u,m,g,y,v,f,_,b,j,x,k,C,S,h,D,w,M,G,T,L,P;return{setters:[e=>{t=e.u,r=e.c,n=e._},e=>{o=e.d,l=e.a5,d=e.s,s=e.r,i=e.o,p=e.a2,c=e.a3,u=e.a4,m=e.u,g=e.a9,y=e.c,v=e.G,f=e.ad,_=e.h,b=e.ae},e=>{j=e.Q},e=>{x=e.u},e=>{k=e.D},e=>{C=e.D},e=>{S=e.h,h=e.F,D=e.ac,w=e.O,M=e.G,G=e.M,T=e.ad,L=e.ae},e=>{P=e._},null,null],execute:function(){e("default",P(o({name:"DepartmentPage",__name:"index",setup(e){g((e=>({"35082fb2":2*m($).paddingLG+"px","004fa809":m($).colorBgContainer,"342b3036":`${m($).borderRadiusLG}px`,"1f512b16":m($).colorBorderSecondary,"218339ae":`${m($).paddingXXS}px`,"24a2dbb3":m(R)&&"transparent","00e3db7c":m(R)?m($).colorPrimary:m($).colorPrimaryHover})));const o=b((()=>n((()=>a.import("./modal-legacy-BjVQmNul.js")),void 0))),{t:P}=l(),{token:$}=x(),B=d([]),E=s(),F=[{key:"addChild",label:P("department.operations.addChild")},{key:"edit",label:P("department.operations.edit")},{key:"delete",label:P("department.operations.delete")}],O=s(!1),X=s("addChild"),z=(e,a)=>{O.value=!0,X.value=e,E.value=a},{loading:A,run:H}=t(k.getCompanyDepartmentList,{onSuccess:e=>{B.value=C.toTree(e.data)}}),I=s(!1),{run:N}=t(k.deleteDepartment,{manual:!0,onSuccess:()=>{S.success(P("department.operations.operationMessage.deleteSuccess")),H()},onError:e=>{S.error(e.message||P("department.operations.operationMessage.deleteError"))},onFinally:()=>{I.value=!1}}),Q={addChild:e=>{z("addChild",e.toString())},edit:e=>{z("edit",e.toString())},delete:e=>{L.error({title:P("department.operations.operationMessage.deleteConfirmTitle"),content:P("department.operations.operationMessage.deleteConfirmContent"),okText:P("department.operations.operationMessage.confirmDelete"),closable:!0,cancelText:P("department.operations.operationMessage.cancelDelete"),onOk:async()=>(await N(e.toString()),null)})}},{isDark:R}=r();return i((async()=>{await H()})),(e,a)=>(c(),p(m(h),{class:"department-wrapper",justify:"center",align:"start"},{default:u((()=>[y(m(j),{loading:m(A),active:"",title:!1,paragraph:{rows:16}},{default:u((()=>[y(m(D),{class:"department-tree flex-1","default-expand-all":"",draggable:"","block-node":"","tree-data":B.value},{title:u((({title:a,managerName:t,key:r})=>[y(m(h),{class:"department-tree-item",justify:"space-between"},{default:u((()=>[y(m(w),null,{default:u((()=>[v(f(a),1)])),_:2},1024),y(m(h),{gap:"middle"},{default:u((()=>[y(m(w),{type:"secondary"},{default:u((()=>[v(f(t),1)])),_:2},1024),y(m(M),{overlay:_(m(G),{items:F,onClick:e=>((e,a)=>{Q[e.key](a)})(e,r)}),arrow:{pointAtCenter:!0}},{default:u((()=>[y(m(w),{type:"secondary"},{default:u((()=>[v(f(e.$t("department.operations.title"))+" ",1),y(m(T))])),_:1})])),_:2},1032,["overlay"])])),_:2},1024)])),_:2},1024)])),_:1},8,["tree-data"])])),_:1},8,["loading"]),y(m(o),{open:O.value,"onUpdate:open":a[0]||(a[0]=e=>O.value=e),type:X.value,"department-id":E.value,onSuccess:m(H)},null,8,["open","type","department-id","onSuccess"])])),_:1}))}}),[["__scopeId","data-v-7b147a4a"]]))}}}));
