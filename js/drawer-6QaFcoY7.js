const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["js/map-C44qZZAn.js","js/index-BZBl1bBK.js","js/vue-vendor-BX3z0DRI.js","js/antd-vendor-ChGXved8.js","js/lodash-vendor-C1hxrrCz.js","js/axios-vendor-cIIFlI1p.js","js/skeleton-BLzL0NKa.js","js/index-BUvr80Hr.js","js/index-DCtmZ3ZE.js","js/spin-Dif1E5Ka.js","js/department.service-CaNKM9sv.js","js/vue3-count-to.esm-B-Ex2Uhy.js","js/_plugin-vue_export-helper-DlAUqK2U.js","js/generate-menu-item-vU3zl0rQ.js"])))=>i.map(i=>d[i]);
import{u as S,_ as F}from"./index-BZBl1bBK.js";import{d as V,ab as $,u as e,ai as N,s as h,a as P,r as R,j as G,a7 as K,o as q,a4 as z,a5 as Q,a6 as n,c as s,G as p,af as m,aj as f,ag as U,aa as J}from"./vue-vendor-BX3z0DRI.js";import{Q as H}from"./skeleton-BLzL0NKa.js";import{u as W}from"./index-BUvr80Hr.js";import{a as w}from"./index-DCtmZ3ZE.js";import{g as X}from"./generate-menu-item-vU3zl0rQ.js";import{h as Y,F as y,B as x,M as Z,J as ee,aE as ae,aF as te,aG as se}from"./antd-vendor-ChGXved8.js";import{_ as ne}from"./_plugin-vue_export-helper-DlAUqK2U.js";const oe=r=>{switch(!0){case r<1e3:return"".concat(r,"米");case(r>=1e3&&r<1e6):return"".concat((r/1e3).toFixed(2),"公里");default:return"".concat((r/1e6).toFixed(2),"百万公里")}},re={class:"flex-1 h-full"},de={class:"attendance-scope-company-list flex-1"},ce=V({__name:"drawer",props:{open:{type:Boolean,required:!1},openModifiers:{}},emits:["update:open"],setup(r){$(a=>({"59e3a1cc":"".concat(e(u).borderRadiusLG,"px"),"281f73b4":e(u).colorBgContainer}));const b=U(()=>F(()=>import("./map-C44qZZAn.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13]))),g=N(r,"open"),l=()=>{g.value=!1},L=(a=0)=>d("attendance.drawer.radiusTip",{distance:oe(a)}),_=h(),k=a=>a.map(t=>X(t.id.toString(),t.name)),i=h([]),o=P({address:"",id:0,phone:"",name:"",point:[],radius:0}),{run:M,loading:T}=S(w.getCompanyList,{manual:!0,onSuccess:({data:a})=>{i.value=a,_.value=k(a),Object.assign(o,a[0])}}),C=R(),v=a=>i.value.filter(t=>t.id===Number(a))[0],B=(a,t)=>{const c=v(t);Object.assign(c,a)},j=a=>{Object.assign(o,v(a.key))},I=a=>{B(o,o.id)},O=G(()=>({lat:o.point[1],lng:o.point[0]})),{run:A,loading:D}=S(w.updateCompanyList,{manual:!0,onSuccess:()=>{Y.success(d("attendance.drawer.messages.updateSuccess")),l()},onError:({message:a})=>{a.error(a||d("attendance.drawer.messages.updateError"))}}),E=()=>{A({list:i.value})};q(async()=>{await M()});const{token:u}=W(),{t:d}=K();return(a,t)=>(Q(),z(e(se),{height:"100vh",onClose:l,title:e(d)("attendance.drawer.title"),open:g.value,placement:"top",closable:!1},{extra:n(()=>[s(e(te),{onClick:l,style:J({color:e(u).colorText})},null,8,["style"])]),default:n(()=>[s(e(y),{class:"h-full",gap:"middle"},{default:n(()=>[f("div",re,[s(e(b),{"scoped-radius":o.radius,"scoped-center":O.value},null,8,["scoped-radius","scoped-center"])]),s(e(y),{class:"attendance-scope-right",vertical:"",gap:"middle"},{default:n(()=>[s(e(H),{loading:e(T),active:"",title:!1,paragraph:{rows:8}},{default:n(()=>[f("div",de,[s(e(Z),{class:"attendance-scope-company-list-inner",selectedKeys:C.value,"onUpdate:selectedKeys":t[0]||(t[0]=c=>C.value=c),items:_.value,onClick:j},null,8,["selectedKeys","items"])])]),_:1},8,["loading"]),f("div",null,[s(e(ee),{type:"secondary"},{default:n(()=>[p(m(e(d)("attendance.drawer.radius")),1)]),_:1}),s(e(ae),{onAfterChange:I,max:1e3,value:o.radius,"onUpdate:value":t[1]||(t[1]=c=>o.radius=c),"tip-formatter":L},null,8,["value"])])]),_:1})]),_:1})]),footer:n(()=>[s(e(y),{justify:"end",gap:"middle"},{default:n(()=>[s(e(x),{onClick:l},{default:n(()=>[p(m(e(d)("attendance.drawer.buttons.cancel")),1)]),_:1}),s(e(x),{type:"primary",onClick:E,loading:e(D)},{default:n(()=>[p(m(e(d)("attendance.drawer.buttons.batchSave")),1)]),_:1},8,["loading"])]),_:1})]),_:1},8,["title","open"]))}}),le=ne(ce,[["__scopeId","data-v-49ddc1eb"]]),Ce=Object.freeze(Object.defineProperty({__proto__:null,default:le},Symbol.toStringTag,{value:"Module"}));export{oe as c,Ce as d};
