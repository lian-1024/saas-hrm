const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["js/modal-Cfx5klYO.js","js/modal.vue_vue_type_script_setup_true_lang-BGdz2b2r.js","js/index-BUvr80Hr.js","js/antd-vendor-ChGXved8.js","js/vue-vendor-BX3z0DRI.js","js/lodash-vendor-C1hxrrCz.js","js/spin-Dif1E5Ka.js","js/index-Dae1U06w.js","js/axios-vendor-cIIFlI1p.js","js/department.service-BCxqcPIw.js","js/_plugin-vue_export-helper-DlAUqK2U.js"])))=>i.map(i=>d[i]);
import{u as b,c as I,_ as R}from"./index-Dae1U06w.js";import{d as V,a7 as $,s as F,r as d,o as G,a4 as j,a5 as N,a6 as n,u as e,ab as Q,c as a,G as c,af as m,h as X,ag as q}from"./vue-vendor-BX3z0DRI.js";import{Q as H}from"./skeleton-BLzL0NKa.js";import{u as J}from"./index-BUvr80Hr.js";import{D as v}from"./department.service-BCxqcPIw.js";import{D as U}from"./department-Ccp6HD3_.js";import{h,F as u,aa as z,J as f,y as K,M as W,ab as Y,ac as Z}from"./antd-vendor-ChGXved8.js";import{_ as ee}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./axios-vendor-cIIFlI1p.js";import"./lodash-vendor-C1hxrrCz.js";const te=V({name:"DepartmentPage",__name:"index",setup(ae){Q(t=>({"35082fb2":"".concat(e(r).paddingLG*2,"px"),"004fa809":e(r).colorBgContainer,"342b3036":"".concat(e(r).borderRadiusLG,"px"),"1f512b16":e(r).colorBorderSecondary,"218339ae":"".concat(e(r).paddingXXS,"px"),"24a2dbb3":e(C)&&"transparent","00e3db7c":e(C)?e(r).colorPrimary:e(r).colorPrimaryHover}));const k=q(()=>R(()=>import("./modal-Cfx5klYO.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10]))),{t:o}=$(),{token:r}=J(),g=F([]),_=d(),x=[{key:"addChild",label:o("department.operations.addChild")},{key:"edit",label:o("department.operations.edit")},{key:"delete",label:o("department.operations.delete")}],l=d(!1),y=d("addChild"),D=(t,s)=>{l.value=!0,y.value=t,_.value=s},{loading:S,run:p}=b(v.getCompanyDepartmentList,{onSuccess:t=>{g.value=U.toTree(t.data)}}),M=t=>{D("addChild",t.toString())},T=t=>{D("edit",t.toString())},w=d(!1),{run:L}=b(v.deleteDepartment,{manual:!0,onSuccess:()=>{h.success(o("department.operations.operationMessage.deleteSuccess")),p()},onError:t=>{h.error(t.message||o("department.operations.operationMessage.deleteError"))},onFinally:()=>{w.value=!1}}),O={addChild:M,edit:T,delete:t=>{Z.error({title:o("department.operations.operationMessage.deleteConfirmTitle"),content:o("department.operations.operationMessage.deleteConfirmContent"),okText:o("department.operations.operationMessage.confirmDelete"),closable:!0,cancelText:o("department.operations.operationMessage.cancelDelete"),onOk:async()=>(await L(t.toString()),null)})}},A=(t,s)=>{O[t.key](s)},{isDark:C}=I();return G(async()=>{await p()}),(t,s)=>(N(),j(e(u),{class:"department-wrapper",justify:"center",align:"start"},{default:n(()=>[a(e(H),{loading:e(S),active:"",title:!1,paragraph:{rows:16}},{default:n(()=>[a(e(z),{class:"department-tree flex-1","default-expand-all":"",draggable:"","block-node":"","tree-data":g.value},{title:n(({title:i,managerName:E,key:P})=>[a(e(u),{class:"department-tree-item",justify:"space-between"},{default:n(()=>[a(e(f),null,{default:n(()=>[c(m(i),1)]),_:2},1024),a(e(u),{gap:"middle"},{default:n(()=>[a(e(f),{type:"secondary"},{default:n(()=>[c(m(E),1)]),_:2},1024),a(e(K),{overlay:X(e(W),{items:x,onClick:B=>A(B,P)}),arrow:{pointAtCenter:!0}},{default:n(()=>[a(e(f),{type:"secondary"},{default:n(()=>[c(m(t.$t("department.operations.title"))+" ",1),a(e(Y))]),_:1})]),_:2},1032,["overlay"])]),_:2},1024)]),_:2},1024)]),_:1},8,["tree-data"])]),_:1},8,["loading"]),a(e(k),{open:l.value,"onUpdate:open":s[0]||(s[0]=i=>l.value=i),type:y.value,"department-id":_.value,onSuccess:e(p)},null,8,["open","type","department-id","onSuccess"])]),_:1}))}}),fe=ee(te,[["__scopeId","data-v-7b147a4a"]]);export{fe as default};
