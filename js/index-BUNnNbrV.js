const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["js/permission-modal-3iPkpdXc.js","js/vue-vendor-BX3z0DRI.js","js/permission-DEus3gT-.js","js/index-Dae1U06w.js","js/antd-vendor-ChGXved8.js","js/lodash-vendor-C1hxrrCz.js","js/axios-vendor-cIIFlI1p.js","js/modal.vue_vue_type_script_setup_true_lang-BGdz2b2r.js","js/index-BUvr80Hr.js","js/spin-Dif1E5Ka.js","js/status-Bkxi8BcS.js","js/_plugin-vue_export-helper-DlAUqK2U.js"])))=>i.map(i=>d[i]);
import{u as P,_ as V}from"./index-Dae1U06w.js";import{d as M,ab as z,u as e,a7 as A,r as l,o as N,a4 as C,a5 as b,a6 as n,aj as D,c as a,G as d,af as m,aq as G,ag as O,h as R}from"./vue-vendor-BX3z0DRI.js";import{Q as q}from"./spin-Dif1E5Ka.js";import{u as F}from"./index-BUvr80Hr.js";import{P as Q,a as S}from"./permission-DEus3gT-.js";import{h as I,B as c,$ as j,F as B,ac as U,ar as H}from"./antd-vendor-ChGXved8.js";import{_ as J}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./axios-vendor-cIIFlI1p.js";import"./lodash-vendor-C1hxrrCz.js";const K=M({name:"PermissionPage",__name:"index",setup(W){z(s=>({"7d72f5c4":"".concat(e(o).paddingLG,"px"),"3f700837":e(o).colorBgContainer,"3a84f477":"".concat(e(o).borderRadiusLG,"px"),"2a5ff8ba":e(o).colorBorderSecondary}));const T=O(()=>V(()=>import("./permission-modal-3iPkpdXc.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11]))),{t:i}=A(),h=[{title:i("permission.table.columns.name"),dataIndex:"name",key:"name"},{title:i("permission.table.columns.key"),dataIndex:"key",key:"key"},{title:i("permission.table.columns.description"),dataIndex:"description",key:"description"},{title:i("permission.table.columns.operations"),dataIndex:"operations",key:"operations",fixed:"right",width:200}],p=l([]),u=l(!1),y=l(!1),f=l(),{run:_,loading:E}=P(S.getPermissionList,{manual:!0,onSuccess:({data:s})=>{p.value=Q.convertPermissionToTableTree(s)}}),{run:L}=P(S.deletePermissionById,{manual:!0,onSuccess:()=>{I.success(i("permission.messages.deleteSuccess")),_()},onError:s=>{I.error(s.message||i("permission.messages.deleteError"))}}),v=s=>{y.value=s,u.value=!0},g=s=>{f.value=s,v(!1)},$=s=>{f.value=s,v(!0)},w=s=>{U.confirm({content:i("permission.messages.deleteConfirm"),icon:R(H),onOk:async()=>{try{await L(s)}finally{return null}}})};N(async()=>{await _()});const{token:o}=F();return(s,t)=>(b(),C(e(B),{class:"permission-wrapper h-full",vertical:"",gap:"middle"},{default:n(()=>[D("div",null,[a(e(c),{type:"primary",onClick:t[0]||(t[0]=r=>g(0))},{default:n(()=>[d(m(e(i)("permission.actions.addPermission")),1)]),_:1})]),a(e(q),{spinning:e(E)},{default:n(()=>[a(e(j),{pagination:!1,class:"permission-table","data-source":p.value,columns:h,"default-expand-all":!0,"indent-size":15,bordered:""},{bodyCell:n(({column:r,record:k})=>[r.key==="operations"?(b(),C(e(B),{key:0},{default:n(()=>[a(e(c),{size:"small",onClick:x=>g(k.id),type:"link"},{default:n(()=>[d(m(e(i)("permission.table.actions.add")),1)]),_:2},1032,["onClick"]),a(e(c),{size:"small",onClick:x=>$(k.id),type:"link"},{default:n(()=>[d(m(e(i)("permission.table.actions.edit")),1)]),_:2},1032,["onClick"]),a(e(c),{size:"small",onClick:x=>w(k.id),type:"link"},{default:n(()=>[d(m(e(i)("permission.table.actions.delete")),1)]),_:2},1032,["onClick"])]),_:2},1024)):G("",!0)]),_:1},8,["data-source"])]),_:1},8,["spinning"]),a(e(T),{"permission-id":f.value,"is-edit":y.value,open:u.value,"onUpdate:open":t[1]||(t[1]=r=>u.value=r),"permission-tree":p.value,onSuccess:e(_)},null,8,["permission-id","is-edit","open","permission-tree","onSuccess"])]),_:1}))}}),te=J(K,[["__scopeId","data-v-f093501e"]]);export{te as default};
