System.register(["./index-legacy-Dr3Ksir8.js","./vue-vendor-legacy-ikyms0Ip.js","./skeleton-legacy-XkooQtmU.js","./index-legacy-D_zaI8lQ.js","./index-legacy-C7lEz3KE.js","./generate-menu-item-legacy-SOaWgP50.js","./antd-vendor-legacy-DsFsidym.js","./_plugin-vue_export-helper-legacy-DgAO6S8O.js"],(function(e,a){"use strict";var t,n,s,l,d,r,o,c,i,u,p,g,m,y,v,f,_,j,b,h,x,w,C,k,S,O,F,K,$,B,E,G,L,M;return{setters:[e=>{t=e.u,n=e._},e=>{s=e.d,l=e.ab,d=e.u,r=e.ai,o=e.s,c=e.a,i=e.r,u=e.j,p=e.a7,g=e.o,m=e.a4,y=e.a5,v=e.a6,f=e.c,_=e.G,j=e.af,b=e.aj,h=e.ag,x=e.aa},e=>{w=e.Q},e=>{C=e.u},e=>{k=e.a},e=>{S=e.g},e=>{O=e.h,F=e.F,K=e.B,$=e.M,B=e.J,E=e.aE,G=e.aF,L=e.aG},e=>{M=e._}],execute:function(){const T=e("c",(e=>{switch(!0){case e<1e3:return`${e}米`;case e>=1e3&&e<1e6:return`${(e/1e3).toFixed(2)}公里`;default:return`${(e/1e6).toFixed(2)}百万公里`}})),U={class:"flex-1 h-full"},q={class:"attendance-scope-company-list flex-1"},z=s({__name:"drawer",props:{open:{type:Boolean,required:!1},openModifiers:{}},emits:["update:open"],setup(e){l((e=>({"59e3a1cc":`${d(ee).borderRadiusLG}px`,"281f73b4":d(ee).colorBgContainer})));const s=h((()=>n((()=>a.import("./map-legacy-D4EZd-Y7.js")),void 0))),M=r(e,"open"),z=()=>{M.value=!1},A=(e=0)=>ae("attendance.drawer.radiusTip",{distance:T(e)}),I=o(),J=o([]),N=c({address:"",id:0,phone:"",name:"",point:[],radius:0}),{run:P,loading:Q}=t(k.getCompanyList,{manual:!0,onSuccess:({data:e})=>{J.value=e,I.value=e.map((e=>S(e.id.toString(),e.name))),Object.assign(N,e[0])}}),R=i(),D=e=>J.value.filter((a=>a.id===Number(e)))[0],H=e=>{Object.assign(N,D(e.key))},V=e=>{((e,a)=>{const t=D(a);Object.assign(t,e)})(N,N.id)},W=u((()=>({lat:N.point[1],lng:N.point[0]}))),{run:X,loading:Y}=t(k.updateCompanyList,{manual:!0,onSuccess:()=>{O.success(ae("attendance.drawer.messages.updateSuccess")),z()},onError:({message:e})=>{e.error(e||ae("attendance.drawer.messages.updateError"))}}),Z=()=>{X({list:J.value})};g((async()=>{await P()}));const{token:ee}=C(),{t:ae}=p();return(e,a)=>(y(),m(d(L),{height:"100vh",onClose:z,title:d(ae)("attendance.drawer.title"),open:M.value,placement:"top",closable:!1},{extra:v((()=>[f(d(G),{onClick:z,style:x({color:d(ee).colorText})},null,8,["style"])])),default:v((()=>[f(d(F),{class:"h-full",gap:"middle"},{default:v((()=>[b("div",U,[f(d(s),{"scoped-radius":N.radius,"scoped-center":W.value},null,8,["scoped-radius","scoped-center"])]),f(d(F),{class:"attendance-scope-right",vertical:"",gap:"middle"},{default:v((()=>[f(d(w),{loading:d(Q),active:"",title:!1,paragraph:{rows:8}},{default:v((()=>[b("div",q,[f(d($),{class:"attendance-scope-company-list-inner",selectedKeys:R.value,"onUpdate:selectedKeys":a[0]||(a[0]=e=>R.value=e),items:I.value,onClick:H},null,8,["selectedKeys","items"])])])),_:1},8,["loading"]),b("div",null,[f(d(B),{type:"secondary"},{default:v((()=>[_(j(d(ae)("attendance.drawer.radius")),1)])),_:1}),f(d(E),{onAfterChange:V,max:1e3,value:N.radius,"onUpdate:value":a[1]||(a[1]=e=>N.radius=e),"tip-formatter":A},null,8,["value"])])])),_:1})])),_:1})])),footer:v((()=>[f(d(F),{justify:"end",gap:"middle"},{default:v((()=>[f(d(K),{onClick:z},{default:v((()=>[_(j(d(ae)("attendance.drawer.buttons.cancel")),1)])),_:1}),f(d(K),{type:"primary",onClick:Z,loading:d(Y)},{default:v((()=>[_(j(d(ae)("attendance.drawer.buttons.batchSave")),1)])),_:1},8,["loading"])])),_:1})])),_:1},8,["title","open"]))}}),A=M(z,[["__scopeId","data-v-49ddc1eb"]]),I=Object.freeze(Object.defineProperty({__proto__:null,default:A},Symbol.toStringTag,{value:"Module"}));e("d",I)}}}));
