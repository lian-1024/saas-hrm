const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["js/map-BKN1EA3X.js","js/index-CI1igBQZ.js","js/vue-vendor-I_PSXyJa.js","js/antd-vendor-T3zku5__.js","js/lodash-vendor-DOy_biNW.js","js/axios-vendor-cIIFlI1p.js","js/skeleton-DY1tZivi.js","js/index-YJ2Yz_0y.js","js/index-CUpDwP8x.js","js/spin-f7H7F6Je.js","js/department.service-BmOWA-Yr.js","js/vue3-count-to.esm-DUdQsqT0.js","js/_plugin-vue_export-helper-DlAUqK2U.js","js/generate-menu-item-vU3zl0rQ.js"])))=>i.map(i=>d[i]);
import{u as h,_ as $}from"./index-CI1igBQZ.js";import{d as E,a9 as F,u as e,ag as N,s as S,a as P,r as R,j as K,a5 as q,o as z,a2 as G,a3 as Q,a4 as n,c as s,G as p,ad as m,ah as f,ae as U,a8 as H}from"./vue-vendor-I_PSXyJa.js";import{Q as J}from"./skeleton-DY1tZivi.js";import{u as W}from"./index-YJ2Yz_0y.js";import{a as w}from"./index-CUpDwP8x.js";import{g as X}from"./generate-menu-item-vU3zl0rQ.js";import{h as Y,F as y,B as x,M as Z,O as ee,aH as ae,aI as te,aJ as se}from"./antd-vendor-T3zku5__.js";import{_ as ne}from"./_plugin-vue_export-helper-DlAUqK2U.js";const oe=r=>{switch(!0){case r<1e3:return"".concat(r,"米");case(r>=1e3&&r<1e6):return"".concat((r/1e3).toFixed(2),"公里");default:return"".concat((r/1e6).toFixed(2),"百万公里")}},re={class:"flex-1 h-full"},de={class:"attendance-scope-company-list flex-1"},ce=E({__name:"drawer",props:{open:{type:Boolean,required:!1},openModifiers:{}},emits:["update:open"],setup(r){F(a=>({"59e3a1cc":"".concat(e(u).borderRadiusLG,"px"),"281f73b4":e(u).colorBgContainer}));const b=U(()=>$(()=>import("./map-BKN1EA3X.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13]))),g=N(r,"open"),l=()=>{g.value=!1},L=(a=0)=>d("attendance.drawer.radiusTip",{distance:oe(a)}),_=S(),k=a=>a.map(t=>X(t.id.toString(),t.name)),i=S([]),o=P({address:"",id:0,phone:"",name:"",point:[],radius:0}),{run:M,loading:T}=h(w.getCompanyList,{manual:!0,onSuccess:({data:a})=>{i.value=a,_.value=k(a),Object.assign(o,a[0])}}),C=R(),v=a=>i.value.filter(t=>t.id===Number(a))[0],B=(a,t)=>{const c=v(t);Object.assign(c,a)},I=a=>{Object.assign(o,v(a.key))},O=a=>{B(o,o.id)},j=K(()=>({lat:o.point[1],lng:o.point[0]})),{run:A,loading:D}=h(w.updateCompanyList,{manual:!0,onSuccess:()=>{Y.success(d("attendance.drawer.messages.updateSuccess")),l()},onError:({message:a})=>{a.error(a||d("attendance.drawer.messages.updateError"))}}),V=()=>{A({list:i.value})};z(async()=>{await M()});const{token:u}=W(),{t:d}=q();return(a,t)=>(Q(),G(e(se),{height:"100vh",onClose:l,title:e(d)("attendance.drawer.title"),open:g.value,placement:"top",closable:!1},{extra:n(()=>[s(e(te),{onClick:l,style:H({color:e(u).colorText})},null,8,["style"])]),default:n(()=>[s(e(y),{class:"h-full",gap:"middle"},{default:n(()=>[f("div",re,[s(e(b),{"scoped-radius":o.radius,"scoped-center":j.value},null,8,["scoped-radius","scoped-center"])]),s(e(y),{class:"attendance-scope-right",vertical:"",gap:"middle"},{default:n(()=>[s(e(J),{loading:e(T),active:"",title:!1,paragraph:{rows:8}},{default:n(()=>[f("div",de,[s(e(Z),{class:"attendance-scope-company-list-inner",selectedKeys:C.value,"onUpdate:selectedKeys":t[0]||(t[0]=c=>C.value=c),items:_.value,onClick:I},null,8,["selectedKeys","items"])])]),_:1},8,["loading"]),f("div",null,[s(e(ee),{type:"secondary"},{default:n(()=>[p(m(e(d)("attendance.drawer.radius")),1)]),_:1}),s(e(ae),{onAfterChange:O,max:1e3,value:o.radius,"onUpdate:value":t[1]||(t[1]=c=>o.radius=c),"tip-formatter":L},null,8,["value"])])]),_:1})]),_:1})]),footer:n(()=>[s(e(y),{justify:"end",gap:"middle"},{default:n(()=>[s(e(x),{onClick:l},{default:n(()=>[p(m(e(d)("attendance.drawer.buttons.cancel")),1)]),_:1}),s(e(x),{type:"primary",onClick:V,loading:e(D)},{default:n(()=>[p(m(e(d)("attendance.drawer.buttons.batchSave")),1)]),_:1},8,["loading"])]),_:1})]),_:1},8,["title","open"]))}}),le=ne(ce,[["__scopeId","data-v-49ddc1eb"]]),Ce=Object.freeze(Object.defineProperty({__proto__:null,default:le},Symbol.toStringTag,{value:"Module"}));export{oe as c,Ce as d};
