System.register(["./index-legacy-FCYPyWIL.js","./vue-vendor-legacy-x9FjLCOD.js","./spin-legacy-NTWxnDiJ.js","./index-legacy-CHUU-5It.js","./role.service-legacy-Cy3QUHZR.js","./antd-vendor-legacy-C9XdHwF7.js","./_plugin-vue_export-helper-legacy-DgAO6S8O.js","./axios-vendor-legacy-B4nRALG8.js","./lodash-vendor-legacy-D6Hi_gR3.js"],(function(e,a){"use strict";var l,t,o,n,i,r,s,d,c,u,p,y,g,v,m,k,f,b,_,C,x,j,w,S,h,R,$,I,M,B,U,z,E,G,L,O;return{setters:[e=>{l=e.u,t=e._},e=>{o=e.d,n=e.a9,i=e.u,r=e.a5,s=e.r,d=e.a,c=e.j,u=e.o,p=e.a2,y=e.a3,g=e.a4,v=e.c,m=e.G,k=e.ad,f=e.a7,b=e.an,_=e.F,C=e.ae},e=>{x=e.Q},e=>{j=e.u},e=>{w=e.R},e=>{S=e.h,h=e.B,R=e.a1,$=e.al,I=e.av,M=e.S,B=e.u,U=e.F,z=e.aa,E=e.ah,G=e.O,L=e.aw},e=>{O=e._},null,null],execute:function(){e("default",O(o({name:"RolePage",__name:"index",setup(e){n((e=>({"2daf96c4":`${i(O).paddingLG}px`,a9b571de:i(O).colorBgContainer,"1866eddd":`${i(O).borderRadiusLG}px`,"2c937506":i(O).colorBorderSecondary})));const{t:o}=r(),{token:O}=j(),F=C((()=>t((()=>a.import("./add-role-modal-legacy-BzN_BS6f.js")),void 0))),P=C((()=>t((()=>a.import("./give-permission-modal-legacy-eg6859Z7.js")),void 0))),T=["name","state","description"],H=[{title:o("role.table.columns.key"),dataIndex:"id",key:"key"},{title:o("role.table.columns.role"),dataIndex:"name",key:"name"},{title:o("role.table.columns.status"),dataIndex:"state",key:"state"},{title:o("role.table.columns.description"),dataIndex:"description",key:"description"},{title:o("role.table.columns.actions"),key:"actions"}],Q=s(!1),q=s(),A=s({total:0,rows:[]}),D=d({page:1,pagesize:10}),J=s(!1),K=d({}),{run:N,loading:V}=l((()=>w.getRoleList(D)),{manual:!0,onSuccess:({data:e})=>{A.value=e}}),{run:W,loading:X}=l(w.updateRole,{manual:!0,onSuccess:()=>{S.success(o("role.table.operationMessage.editRoleSuccess"))},onError:e=>{S.error(e.message||o("role.table.operationMessage.editRoleError"))}}),{run:Y}=l(w.deleteRoleById,{manual:!0,onSuccess:()=>{S.success(o("role.table.operationMessage.deleteRoleSuccess")),N()},onError:e=>{S.error(e.message||o("role.table.operationMessage.deleteRoleError"))}}),Z=async(e,a)=>{D.page=e,D.pagesize=a,await N(D)},ee=["bottomCenter"],ae=["5","10","20","30","40","50"],le=()=>{const e=Math.ceil((A.value.total+1)/D.pagesize);D.page=e,N(D)},te=c((()=>e=>1===K[e]?.state));return u((async()=>{await N()})),(e,a)=>(y(),p(i(U),{class:"role-wrapper",vertical:"",align:"start",gap:"middle"},{default:g((()=>[v(i(h),{type:"primary",onClick:a[0]||(a[0]=e=>J.value=!0)},{default:g((()=>[m(k(e.$t("role.table.actions.addRole")),1)])),_:1}),v(i(x),{spinning:i(V)||i(X),"wrapper-class-name":"flex-1 w-full"},{default:g((()=>[v(i(R),{class:"w-full",pagination:{position:ee,pageSizeOptions:ae,onChange:Z,total:A.value.total,current:D.page},columns:H,dataSource:A.value.rows,bordered:""},{headerCell:g((({title:e})=>[v(i(G),{type:"secondary"},{default:g((()=>[m(k(e),1)])),_:2},1024)])),bodyCell:g((({column:a,record:l,text:t})=>[T.includes(String(a.dataIndex))?(y(),f(_,{key:0},[K[l.id]?(y(),f(_,{key:0},["name"===a.key?(y(),p(i($),{key:0,value:K[l.id][a.key],"onUpdate:value":e=>K[l.id][a.key]=e},null,8,["value","onUpdate:value"])):"description"===a.key?(y(),p(i(I),{key:1,value:K[l.id][a.key],"onUpdate:value":e=>K[l.id][a.key]=e},null,8,["value","onUpdate:value"])):"state"===a.key?(y(),p(i(M),{key:2,checked:te.value(l.id),onChange:e=>((e,a)=>{K[a.id].state=e?1:0})(e,l)},null,8,["checked","onChange"])):b("",!0)],64)):(y(),f(_,{key:1},["state"===a.key?(y(),p(i(B),{key:0,color:Boolean(l.state)?"blue":"default"},{default:g((()=>[m(k(Boolean(l.state)?e.$t("common.enable.enable"):e.$t("common.enable.disable")),1)])),_:2},1032,["color"])):(y(),f(_,{key:1},[m(k(t),1)],64))],64))],64)):b("",!0),"actions"===a.key?(y(),p(i(U),{key:1,gap:"small",wrap:"wrap"},{default:g((()=>[K[l.id]?(y(),f(_,{key:1},[v(i(z),{onClick:e=>(async e=>{const a=K[e];W(a).then((()=>Object.assign(A.value.rows.filter((a=>a.id===e))[0],a))).finally((()=>{delete K[e]}))})(l.id)},{default:g((()=>[m(k(e.$t("role.table.actions.save")),1)])),_:2},1032,["onClick"]),v(i(E),{title:e.$t("role.table.operationMessage.cancelConfirmTitle"),onConfirm:e=>{return a=l.id,void delete K[a];var a}},{default:g((()=>[v(i(z),null,{default:g((()=>[m(k(e.$t("role.table.actions.cancel")),1)])),_:1})])),_:2},1032,["title","onConfirm"])],64)):(y(),f(_,{key:0},[v(i(z),{onClick:e=>{return a=l.id,q.value=a,void(Q.value=!0);var a}},{default:g((()=>[m(k(e.$t("role.table.actions.givePermission")),1)])),_:2},1032,["onClick"]),v(i(z),{onClick:e=>{return a=l.id,void(K[a]=L(A.value.rows.filter((e=>e.id===a))[0]));var a}},{default:g((()=>[m(k(e.$t("role.table.actions.edit")),1)])),_:2},1032,["onClick"]),v(i(E),{title:i(o)("role.table.operationMessage.deleteConfirmTitle"),onConfirm:e=>(async e=>{q.value=e,await Y(e)})(l.id)},{default:g((()=>[v(i(z),null,{default:g((()=>[m(k(e.$t("role.table.actions.delete")),1)])),_:1})])),_:2},1032,["title","onConfirm"])],64))])),_:2},1024)):b("",!0)])),_:1},8,["pagination","dataSource"])])),_:1},8,["spinning"]),v(i(F),{onSuccess:le,open:J.value,"onUpdate:open":a[1]||(a[1]=e=>J.value=e)},null,8,["open"]),v(i(P),{"role-id":q.value,open:Q.value,"onUpdate:open":a[2]||(a[2]=e=>Q.value=e)},null,8,["role-id","open"])])),_:1}))}}),[["__scopeId","data-v-d0294372"]]))}}}));
