System.register(["./modal.vue_vue_type_script_setup_true_lang-legacy-7ayigm6Q.js","./spin-legacy-NTWxnDiJ.js","./index-legacy-FCYPyWIL.js","./department.service-legacy-BkPFY2K_.js","./vue-vendor-legacy-x9FjLCOD.js","./antd-vendor-legacy-C9XdHwF7.js","./_plugin-vue_export-helper-legacy-DgAO6S8O.js","./index-legacy-CHUU-5It.js","./axios-vendor-legacy-B4nRALG8.js","./lodash-vendor-legacy-D6Hi_gR3.js"],(function(e,a){"use strict";var r,t,l,n,d,o,s,u,m,i,p,c,g,v,f,h,y,_,b,I,j,x,w,D,q;return{setters:[e=>{r=e._},e=>{t=e.Q},e=>{l=e.u},e=>{n=e.D},e=>{d=e.d,o=e.af,s=e.a5,u=e.r,m=e.ag,i=e.j,p=e.w,c=e.a2,g=e.a3,v=e.a4,f=e.c,h=e.u,y=e.ah,_=e.G},e=>{b=e.h,I=e.aj,j=e.al,x=e.an,w=e.F,D=e.B},e=>{q=e._},null,null,null],execute:function(){const a="addChild",M="edit",C={class:"department-modal"},S=d({name:"DepartmentModal",__name:"modal",props:o({type:{},departmentId:{}},{open:{type:Boolean,default:!1},openModifiers:{}}),emits:o(["success"],["update:open"]),setup(e,{expose:d,emit:o}){const{t:q}=s(),S=e,k=u([]),F=m(e,"open"),E=u(),L=u({name:"",code:"",managerId:1,introduce:"",createTime:"",id:0,managerName:"",pid:0}),U=o,R={[a]:i((()=>q("department.operations.addChild"))),[M]:i((()=>q("department.operations.edit")))},T={name:[{required:!0,message:q("department.form.rules.name.required"),trigger:"blur"},{min:2,max:10,message:q("department.form.rules.name.min"),trigger:"blur"}],code:[{required:!0,message:q("department.form.rules.code.required"),trigger:"blur"},{min:2,max:10,message:q("department.form.rules.code.min"),trigger:"blur"}],managerId:[{required:!0,message:q("department.form.rules.managerId.required"),trigger:"change"}],introduce:[{required:!0,message:q("department.form.rules.introduce.required"),trigger:"blur"},{max:100,message:q("department.form.rules.introduce.max"),trigger:"blur"}]},{run:B,loading:N}=l(n.addDepartment,{manual:!0,onSuccess:e=>{b.success(q("department.operations.operationMessage.addSuccess")),U("success")},onError:e=>{b.error(q("department.operations.operationMessage.addError"))},onFinally:()=>H()}),{loading:z}=l(n.getDepartmentManagerList,{onSuccess:({data:e})=>{k.value=e.map((e=>({label:e.username,value:e.id})))}}),{run:A,loading:G}=l(n.getDepartmentDetail,{manual:!0,onSuccess:({data:e})=>{L.value=e}}),{run:J,loading:O}=l(n.updateDepartment,{manual:!0,onSuccess:e=>{b.success(q("department.operations.operationMessage.editSuccess")),U("success")},onError:e=>{b.error(e.message||q("department.operations.operationMessage.editError"))},onFinally:()=>H()});p((()=>S.departmentId),(e=>{e&&S.type===M&&A(e)}));const Q=()=>{E.value?.validate().then((async()=>{if(!S.departmentId)return b.error(q("department.operations.operationMessage.selectDepartment"));switch(S.type){case"addChild":const{id:e,createTime:a,managerName:r,...t}=L.value;B({...t,pid:S.departmentId});break;case"edit":J(L.value)}}))},H=()=>{F.value=!1,E.value?.resetFields()};d({setFormData:e=>{Object.assign(L.value,e)}});const K=i((()=>G.value||z.value||O.value||N.value));return(e,a)=>(g(),c(h(r),{width:600,open:F.value,onCancel:H,title:R[S.type].value,closable:"",mask:"",maskClosable:!1},{footer:v((()=>[f(h(w),{justify:"center"},{default:v((()=>[f(h(D),{type:"primary",onClick:Q,loading:h(N)},{default:v((()=>a[4]||(a[4]=[_("确定")]))),_:1},8,["loading"]),f(h(D),{onClick:H},{default:v((()=>a[5]||(a[5]=[_("取消")]))),_:1})])),_:1})])),default:v((()=>[f(h(t),{spinning:K.value},{default:v((()=>[y("div",C,[f(h(I),{ref_key:"formRef",ref:E,layout:"vertical",model:L.value,rules:T},{default:v((()=>[f(h(I).Item,{label:h(q)("department.form.fields.name"),name:"name"},{default:v((()=>[f(h(j),{value:L.value.name,"onUpdate:value":a[0]||(a[0]=e=>L.value.name=e),placeholder:h(q)("department.form.placeholder.name"),maxLength:10,"show-count":""},null,8,["value","placeholder"])])),_:1},8,["label"]),f(h(I).Item,{label:h(q)("department.form.fields.code"),name:"code"},{default:v((()=>[f(h(j),{value:L.value.code,"onUpdate:value":a[1]||(a[1]=e=>L.value.code=e),placeholder:h(q)("department.form.placeholder.code"),maxLength:10,"show-count":""},null,8,["value","placeholder"])])),_:1},8,["label"]),f(h(I).Item,{label:h(q)("department.form.fields.managerId"),name:"managerId"},{default:v((()=>[f(h(x),{placeholder:h(q)("department.form.placeholder.managerId"),value:L.value.managerId,"onUpdate:value":a[2]||(a[2]=e=>L.value.managerId=e),options:k.value},null,8,["placeholder","value","options"])])),_:1},8,["label"]),f(h(I).Item,{label:h(q)("department.form.fields.introduce"),name:"introduce"},{default:v((()=>[f(h(j).TextArea,{value:L.value.introduce,"onUpdate:value":a[3]||(a[3]=e=>L.value.introduce=e),placeholder:h(q)("department.form.placeholder.introduce"),maxLength:100,"auto-size":{minRows:3,maxRows:5},"show-count":""},null,8,["value","placeholder"])])),_:1},8,["label"])])),_:1},8,["model"])])])),_:1},8,["spinning"])])),_:1},8,["open","title"]))}});e("default",q(S,[["__scopeId","data-v-4e884d9b"]]))}}}));
