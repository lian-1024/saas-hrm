import{E as v}from"./employee.service-B6FZBlIR.js";import{R as B}from"./role.service-Ch0ojIkF.js";import{_ as L}from"./modal.vue_vue_type_script_setup_true_lang-BGdz2b2r.js";import{Q as b}from"./spin-Dif1E5Ka.js";import{u as m}from"./index-Dae1U06w.js";import{d as w,ah as D,a7 as j,ai as N,r as y,k as V,j as F,a4 as G,a5 as Q,a6 as l,c as t,u as e,aj as U,G as _,af as E}from"./vue-vendor-BX3z0DRI.js";import{h as d,Y as q,F as O,B as M}from"./antd-vendor-ChGXved8.js";import{_ as T}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./index-BUvr80Hr.js";import"./axios-vendor-cIIFlI1p.js";import"./lodash-vendor-C1hxrrCz.js";const Y={class:"modal-content"},$=w({name:"RoleModal",__name:"role-modal",props:D({employeeId:{}},{open:{default:!1},openModifiers:{}}),emits:["update:open"],setup(c){const{t:s}=j(),r=c,i=N(c,"open"),n=y([]),u=y([]),{loading:R}=m(B.getRoleListEnable,{onSuccess:({data:o})=>{u.value=o.map(a=>({value:a.id,label:a.name}))}}),{run:I,loading:C}=m(v.getEmployeeDetailById,{manual:!0,onSuccess:({data:o})=>{n.value=o.roleIds}}),{run:S,loading:k}=m(v.giveEmployeeRole,{manual:!0,onSuccess:()=>{d.success(s("employee.roleModal.success"))},onError:o=>{o.message?d.error(o.message):d.error(s("employee.roleModal.error"))}}),f=()=>{i.value=!1},x=async()=>{await S({id:r.employeeId,roleIds:n.value}),f()},g=()=>{f()};V(()=>{r.employeeId&&I(r.employeeId)});const h=F(()=>R.value||C.value);return(o,a)=>(Q(),G(e(L),{"confirm-loading":e(k),width:800,mask:"",open:i.value,"onUpdate:open":a[1]||(a[1]=p=>i.value=p),title:e(s)("employee.roleModal.title"),onCancel:g},{footer:l(()=>[t(e(O),{gap:"small",justify:"center"},{default:l(()=>[t(e(M),{type:"primary",onClick:x},{default:l(()=>[_(E(e(s)("employee.roleModal.confirm")),1)]),_:1}),t(e(M),{onClick:g},{default:l(()=>[_(E(e(s)("employee.roleModal.cancel")),1)]),_:1})]),_:1})]),default:l(()=>[t(e(b),{spinning:h.value},{default:l(()=>[U("div",Y,[t(e(q),{value:n.value,"onUpdate:value":a[0]||(a[0]=p=>n.value=p),options:u.value},null,8,["value","options"])])]),_:1},8,["spinning"])]),_:1},8,["confirm-loading","open","title"]))}}),ae=T($,[["__scopeId","data-v-21a6f2d1"]]);export{ae as default};
