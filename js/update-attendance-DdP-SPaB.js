import{_ as E}from"./modal.vue_vue_type_script_setup_true_lang-BGdz2b2r.js";import{Q as R}from"./skeleton-BLzL0NKa.js";import{u as _}from"./index-BZBl1bBK.js";import{a as g}from"./index-DCtmZ3ZE.js";import{d as F,ah as S,ai as G,r as A,w as I,a7 as Q,a4 as M,a5 as i,a6 as e,aj as m,c as u,af as l,u as t,a9 as T,F as U,al as V,G as p}from"./vue-vendor-BX3z0DRI.js";import{h as y,aD as k,I as q,B as L,J,m as O}from"./antd-vendor-ChGXved8.js";import{_ as $}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./index-BUvr80Hr.js";import"./axios-vendor-cIIFlI1p.js";import"./lodash-vendor-C1hxrrCz.js";import"./spin-Dif1E5Ka.js";import"./department.service-CaNKM9sv.js";import"./vue3-count-to.esm-B-Ex2Uhy.js";const z={class:"attendance-status"},H={class:"status-note"},K={class:"attendance-status-radio-list"},P=F({__name:"update-attendance",props:S({day:{},adtStatu:{},userId:{},departmentId:{}},{open:{default:!1},openModifiers:{}}),emits:S(["update"],["update:open"]),setup(f,{emit:h}){const o=f,b=h,r=G(f,"open"),c=A(0);I(()=>o.adtStatu,a=>{c.value=a});const v=A([]),B=a=>a.map(n=>Object.entries(n)).flat().map(n=>{const[s,w]=n;return{label:w,value:Number(s)}}),{run:C,loading:x}=_(g.getAttendancesAdtStatuList,{manual:!0,onSuccess:({data:a})=>{v.value=B(a)}}),{t:d}=Q(),{run:D,loading:N}=_(g.updateAttendance,{manual:!0,onSuccess:()=>{y.success(d("attendance.updateModal.messages.updateSuccess")),r.value=!1,b("update")},onError:()=>{y.error(d("attendance.updateModal.messages.updateError"))}});I(()=>o.userId,a=>{console.log("newValue",a),a&&C(a)});const Y=()=>{D(o.userId,{adtStatu:c.value,day:O(o.day).format("YYYYMMDD"),departmentId:o.departmentId,userId:o.userId})},j=()=>{r.value=!1};return(a,n)=>(i(),M(t(E),{open:r.value,"onUpdate:open":n[1]||(n[1]=s=>r.value=s),mask:""},{title:e(()=>[u(t(J),null,{default:e(()=>[p(l(t(d)("attendance.updateModal.title",{date:a.day})),1)]),_:1})]),footer:e(()=>[u(t(q),null,{default:e(()=>[u(t(L),{onClick:j},{default:e(()=>[p(l(t(d)("attendance.updateModal.buttons.cancel")),1)]),_:1}),u(t(L),{type:"primary",loading:t(N),onClick:Y},{default:e(()=>[p(l(t(d)("attendance.updateModal.buttons.confirm")),1)]),_:1},8,["loading"])]),_:1})]),default:e(()=>[m("div",z,[m("p",H,l(t(d)("attendance.updateModal.note")),1),u(t(R),{loading:t(x),active:"",title:!1,paragraph:{rows:8}},{default:e(()=>[u(t(k).Group,{value:c.value,"onUpdate:value":n[0]||(n[0]=s=>c.value=s)},{default:e(()=>[m("div",K,[(i(!0),T(U,null,V(v.value,s=>(i(),M(t(k),{key:s.value,value:s.value},{default:e(()=>[p(l(s.label),1)]),_:2},1032,["value"]))),128))])]),_:1},8,["value"])]),_:1},8,["loading"])])]),_:1},8,["open"]))}}),ct=$(P,[["__scopeId","data-v-93efe109"]]);export{ct as default};
